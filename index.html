<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CollabSpace - Workspace Communication</title>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    :root {
      --primary: #6C5CE7;
      --secondary: #00B894;
      --dark: #2D3436;
      --light: #F5F6FA;
      --warning: #FDCB6E;
      --danger: #E17055;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', system-ui, sans-serif;
    }
    
    body {
      background: var(--light);
      color: var(--dark);
    }
    
    .app-container {
      display: grid;
      grid-template-columns: 280px 1fr;
      height: 100vh;
    }
    
    /* Workspace Sidebar */
    .workspace-sidebar {
      background: var(--dark);
      color: white;
      padding: 20px;
      display: flex;
      flex-direction: column;
    }
    
    .workspace-header {
      display: flex;
      align-items: center;
      margin-bottom: 30px;
    }
    
    .workspace-logo {
      width: 40px;
      height: 40px;
      background: var(--primary);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 12px;
      font-weight: bold;
    }
    
    .workspace-name {
      font-size: 18px;
      font-weight: 600;
    }
    
    .workspace-menu {
      margin-top: 30px;
      flex-grow: 1;
    }
    
    .menu-item {
      display: flex;
      align-items: center;
      padding: 12px 16px;
      border-radius: 6px;
      margin-bottom: 8px;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .menu-item:hover {
      background: rgba(255, 255, 255, 0.1);
    }
    
    .menu-item.active {
      background: var(--primary);
    }
    
    .menu-icon {
      margin-right: 12px;
      font-size: 18px;
    }
    
    .workspace-footer {
      padding-top: 20px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .user-profile {
      display: flex;
      align-items: center;
    }
    
    .user-avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: var(--secondary);
      margin-right: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
    }
    
    /* Main Content */
    .main-content {
      display: grid;
      grid-template-rows: 60px 1fr 80px;
    }
    
    .channel-header {
      display: flex;
      align-items: center;
      padding: 0 20px;
      border-bottom: 1px solid #e0e0e0;
    }
    
    .channel-title {
      font-size: 20px;
      font-weight: 600;
    }
    
    .channel-actions {
      margin-left: auto;
      display: flex;
      gap: 20px;
    }
    
    .action-button {
      background: none;
      border: none;
      font-size: 18px;
      cursor: pointer;
      color: var(--dark);
    }
    
    /* Messages Area */
    .messages-container {
      padding: 20px;
      overflow-y: auto;
      background: white;
    }
    
    .message {
      display: flex;
      margin-bottom: 20px;
      max-width: 80%;
    }
    
    .message-avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: var(--warning);
      margin-right: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      flex-shrink: 0;
    }
    
    .message-content {
      flex-grow: 1;
    }
    
    .message-header {
      display: flex;
      align-items: center;
      margin-bottom: 6px;
    }
    
    .message-sender {
      font-weight: 600;
      margin-right: 10px;
    }
    
    .message-time {
      font-size: 12px;
      color: #7f8c8d;
    }
    
    .message-text {
      line-height: 1.5;
    }
    
    .message-actions {
      display: flex;
      margin-top: 8px;
    }
    
    .message-action {
      background: none;
      border: none;
      color: #7f8c8d;
      font-size: 12px;
      margin-right: 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
    }
    
    .message-action:hover {
      color: var(--primary);
    }
    
    /* Input Area */
    .input-area {
      padding: 15px 20px;
      border-top: 1px solid #e0e0e0;
      background: white;
    }
    
    .message-input {
      width: 100%;
      height: 50px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      padding: 12px 15px;
      font-size: 14px;
      outline: none;
      resize: none;
    }
    
    .input-actions {
      display: flex;
      justify-content: space-between;
      margin-top: 10px;
    }
    
    .action-icons {
      display: flex;
      gap: 15px;
    }
    
    .input-icon {
      font-size: 18px;
      color: #7f8c8d;
      cursor: pointer;
    }
    
    .send-button {
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 6px;
      padding: 6px 15px;
      font-weight: 500;
      cursor: pointer;
    }
    
    /* Task Feature */
    .task-message {
      background: #f1f3fe;
      border-left: 3px solid var(--primary);
      padding: 12px;
      border-radius: 0 6px 6px 0;
      margin-top: 8px;
    }
    
    .task-header {
      display: flex;
      align-items: center;
      margin-bottom: 8px;
    }
    
    .task-title {
      font-weight: 600;
      margin-right: 10px;
    }
    
    .task-status {
      font-size: 12px;
      padding: 2px 8px;
      border-radius: 12px;
      background: var(--secondary);
      color: white;
    }
    
    .task-status.pending {
      background: var(--warning);
      color: var(--dark);
    }
    
    .task-deadline {
      font-size: 12px;
      color: #7f8c8d;
      margin-top: 6px;
    }
    
    /* File Attachment */
    .file-attachment {
      display: flex;
      align-items: center;
      background: #f1f3fe;
      padding: 8px 12px;
      border-radius: 6px;
      margin-top: 8px;
      width: fit-content;
    }
    
    .file-icon {
      margin-right: 10px;
      color: var(--primary);
    }
    
    .file-name {
      font-size: 14px;
      margin-right: 10px;
    }
    
    .file-size {
      font-size: 12px;
      color: #7f8c8d;
    }
    
    /* Unique Features */
    .decision-message {
      background: #e3f9f4;
      border-left: 3px solid var(--secondary);
      padding: 12px;
      border-radius: 0 6px 6px 0;
      margin-top: 8px;
    }
    
    .decision-title {
      font-weight: 600;
      margin-bottom: 8px;
    }
    
    .decision-options {
      margin-top: 10px;
    }
    
    .decision-option {
      display: flex;
      align-items: center;
      margin-bottom: 8px;
    }
    
    .option-radio {
      margin-right: 8px;
    }
    
    .option-label {
      flex-grow: 1;
    }
    
    .option-votes {
      font-size: 12px;
      color: #7f8c8d;
    }
    
    .decision-button {
      background: var(--secondary);
      color: white;
      border: none;
      border-radius: 4px;
      padding: 4px 8px;
      font-size: 12px;
      margin-top: 10px;
      cursor: pointer;
    }
  </style>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    function App() {
      const [activeChannel, setActiveChannel] = useState('general');
      const [message, setMessage] = useState('');
      const [messages, setMessages] = useState([
        {
          id: '1',
          sender: {
            id: 'user1',
            name: 'Alex Johnson',
            avatar: 'AJ'
          },
          time: '10:30 AM',
          text: 'Team, I\'ve created a new task for the homepage redesign',
          type: 'task',
          task: {
            id: 'task1',
            title: 'Homepage Redesign',
            status: 'in-progress',
            deadline: 'Due tomorrow at 2:00 PM'
          }
        },
        {
          id: '2',
          sender: {
            id: 'user2',
            name: 'Sam Lee',
            avatar: 'SL'
          },
          time: '10:35 AM',
          text: 'I need everyone\'s input on the new branding colors',
          type: 'decision',
          decision: {
            id: 'dec1',
            title: 'Brand Color Selection',
            options: [
              { id: 'opt1', label: 'Violet Gradient', votes: 3 },
              { id: 'opt2', label: 'Teal Monochrome', votes: 2 },
              { id: 'opt3', label: 'Warm Orange Palette', votes: 1 }
            ],
            voted: false
          }
        },
        {
          id: '3',
          sender: {
            id: 'user3',
            name: 'Taylor Chen',
            avatar: 'TC'
          },
          time: '10:40 AM',
          text: 'Here\'s the latest mockup for the product page',
          type: 'file',
          file: {
            name: 'product-mockup-v3.fig',
            size: '2.4 MB'
          }
        },
        {
          id: '4',
          sender: {
            id: 'user1',
            name: 'Alex Johnson',
            avatar: 'AJ'
          },
          time: '10:42 AM',
          text: 'The violet gradient looks most aligned with our brand identity. I\'ve attached some analytics data supporting this.',
          type: 'text'
        },
        {
          id: '5',
          sender: {
            id: 'user4',
            name: 'You',
            avatar: 'YO'
          },
          time: '10:45 AM',
          text: 'I agree with Alex. The data shows better conversion with cooler colors.',
          type: 'text'
        }
      ]);
      
      const messagesEndRef = useRef(null);
      
      const scrollToBottom = () => {
        messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
      };
      
      useEffect(() => {
        scrollToBottom();
      }, [messages]);
      
      const handleSendMessage = (e) => {
        e.preventDefault();
        if (!message.trim()) return;
        
        const newMessage = {
          id: Date.now().toString(),
          sender: {
            id: 'user4',
            name: 'You',
            avatar: 'YO'
          },
          time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }),
          text: message,
          type: 'text'
        };
        
        setMessages([...messages, newMessage]);
        setMessage('');
      };
      
      const handleVote = (decisionId, optionId) => {
        setMessages(messages.map(msg => {
          if (msg.type === 'decision' && msg.decision.id === decisionId) {
            return {
              ...msg,
              decision: {
                ...msg.decision,
                voted: true,
                options: msg.decision.options.map(opt => {
                  if (opt.id === optionId) {
                    return { ...opt, votes: opt.votes + 1 };
                  }
                  return opt;
                })
              }
            };
          }
          return msg;
        }));
      };
      
      const handleTaskUpdate = (taskId, status) => {
        setMessages(messages.map(msg => {
          if (msg.type === 'task' && msg.task.id === taskId) {
            return {
              ...msg,
              task: {
                ...msg.task,
                status: status
              }
            };
          }
          return msg;
        }));
      };

      return (
        <div className="app-container">
          {/* Workspace Sidebar */}
          <div className="workspace-sidebar">
            <div className="workspace-header">
              <div className="workspace-logo">CS</div>
              <div className="workspace-name">CollabSpace</div>
            </div>
            
            <div className="workspace-menu">
              <div 
                className={`menu-item ${activeChannel === 'general' ? 'active' : ''}`}
                onClick={() => setActiveChannel('general')}
              >
                <i className="fas fa-hashtag menu-icon"></i>
                General
              </div>
              
              <div 
                className={`menu-item ${activeChannel === 'design' ? 'active' : ''}`}
                onClick={() => setActiveChannel('design')}
              >
                <i className="fas fa-palette menu-icon"></i>
                Design Team
              </div>
              
              <div 
                className={`menu-item ${activeChannel === 'dev' ? 'active' : ''}`}
                onClick={() => setActiveChannel('dev')}
              >
                <i className="fas fa-code menu-icon"></i>
                Development
              </div>
              
              <div 
                className={`menu-item ${activeChannel === 'marketing' ? 'active' : ''}`}
                onClick={() => setActiveChannel('marketing')}
              >
                <i className="fas fa-bullhorn menu-icon"></i>
                Marketing
              </div>
              
              <div 
                className={`menu-item ${activeChannel === 'projects' ? 'active' : ''}`}
                onClick={() => setActiveChannel('projects')}
              >
                <i className="fas fa-tasks menu-icon"></i>
                Projects
              </div>
            </div>
            
            <div className="workspace-footer">
              <div className="user-profile">
                <div className="user-avatar">YO</div>
                <div>
                  <div style={{ fontWeight: 600 }}>You</div>
                  <div style={{ fontSize: 12, opacity: 0.8 }}>Online</div>
                </div>
              </div>
            </div>
          </div>
          
          {/* Main Content */}
          <div className="main-content">
            <div className="channel-header">
              <div className="channel-title">
                {activeChannel === 'general' && 'General Workspace'}
                {activeChannel === 'design' && 'Design Team'}
                {activeChannel === 'dev' && 'Development Team'}
                {activeChannel === 'marketing' && 'Marketing Team'}
                {activeChannel === 'projects' && 'Project Discussions'}
              </div>
              
              <div className="channel-actions">
                <button className="action-button">
                  <i className="fas fa-search"></i>
                </button>
                <button className="action-button">
                  <i className="fas fa-ellipsis"></i>
                </button>
              </div>
            </div>
            
            <div className="messages-container">
              {messages.map(msg => (
                <div key={msg.id} className="message">
                  <div className="message-avatar">
                    {msg.sender.avatar}
                  </div>
                  
                  <div className="message-content">
                    <div className="message-header">
                      <div className="message-sender">
                        {msg.sender.name}
                      </div>
                      <div className="message-time">
                        {msg.time}
                      </div>
                    </div>
                    
                    <div className="message-text">
                      {msg.text}
                    </div>
                    
                    {/* Task Message */}
                    {msg.type === 'task' && (
                      <div className="task-message">
                        <div className="task-header">
                          <div className="task-title">
                            {msg.task.title}
                          </div>
                          <div className={`task-status ${msg.task.status === 'in-progress' ? 'pending' : ''}`}>
                            {msg.task.status === 'in-progress' ? 'In Progress' : 'Completed'}
                          </div>
                        </div>
                        <div className="task-deadline">
                          {msg.task.deadline}
                        </div>
                        {msg.sender.id === 'user4' && (
                          <div style={{ marginTop: 10 }}>
                            <button 
                              className="decision-button"
                              onClick={() => handleTaskUpdate(msg.task.id, 'completed')}
                              style={{ marginRight: 8 }}
                            >
                              Mark Complete
                            </button>
                            <button 
                              className="decision-button"
                              onClick={() => handleTaskUpdate(msg.task.id, 'in-progress')}
                              style={{ background: '#E17055' }}
                            >
                              Reopen Task
                            </button>
                          </div>
                        )}
                      </div>
                    )}
                    
                    {/* Decision Message */}
                    {msg.type === 'decision' && (
                      <div className="decision-message">
                        <div className="decision-title">
                          {msg.decision.title}
                        </div>
                        
                        <div className="decision-options">
                          {msg.decision.options.map(option => (
                            <div key={option.id} className="decision-option">
                              <input 
                                type="radio" 
                                id={option.id} 
                                name={msg.decision.id}
                                className="option-radio"
                                disabled={msg.decision.voted}
                                onChange={() => handleVote(msg.decision.id, option.id)}
                              />
                              <label htmlFor={option.id} className="option-label">
                                {option.label}
                              </label>
                              <div className="option-votes">
                                ({option.votes} votes)
                              </div>
                            </div>
                          ))}
                        </div>
                        
                        {msg.decision.voted && (
                          <div style={{ marginTop: 8, fontSize: 12, color: '#00B894' }}>
                            <i className="fas fa-check"></i> Thanks for voting!
                          </div>
                        )}
                      </div>
                    )}
                    
                    {/* File Attachment */}
                    {msg.type === 'file' && (
                      <div className="file-attachment">
                        <i className="fas fa-file-alt file-icon"></i>
                        <div className="file-name">
                          {msg.file.name}
                        </div>
                        <div className="file-size">
                          {msg.file.size}
                        </div>
                      </div>
                    )}
                    
                    <div className="message-actions">
                      <button className="message-action">
                        <i className="far fa-thumbs-up"></i> Like
                      </button>
                      <button className="message-action">
                        <i className="fas fa-reply"></i> Reply
                      </button>
                      <button className="message-action">
                        <i className="fas fa-ellipsis-h"></i>
                      </button>
                    </div>
                  </div>
                </div>
              ))}
              <div ref={messagesEndRef} />
            </div>
            
            <div className="input-area">
              <form onSubmit={handleSendMessage}>
                <textarea
                  className="message-input"
                  value={message}
                  onChange={(e) => setMessage(e.target.value)}
                  placeholder={`Message ${activeChannel === 'general' ? 'General' : activeChannel}...`}
                />
                
                <div className="input-actions">
                  <div className="action-icons">
                    <i className="fas fa-paperclip input-icon"></i>
                    <i className="fas fa-tasks input-icon"></i>
                    <i className="fas fa-poll input-icon"></i>
                  </div>
                  
                  <button type="submit" className="send-button">
                    Send <i className="fas fa-paper-plane"></i>
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
