<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Laksmana | Portofolio Afro Klasik</title>
  <link rel="icon" type="image/png" href="https://i.ibb.co/hJ24JGZs/Chat-GPT-Image-21-Apr-2025-06-32-08.png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
  <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/css/lightgallery.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.css">
  
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-storage-compat.js"></script>
  
  <!-- Font tambahan untuk login -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --primary: #E8B959;
      --secondary: #5E3023;
      --accent: #D85A42;
      --dark: #1A120B;
      --light: #F5F5DC;
      --success: #4CAF50;
      --danger: #D85A42;
      --warning: #FF9800;
      --text: #3A2D1F;
      --text-light: #F5F5DC;
    }

    html {
      scroll-behavior: smooth;
    }

    @media (prefers-reduced-motion: reduce) {
      html {
        scroll-behavior: auto;
      }
    }

    body {
      font-family: 'Playfair Display', serif;
      background: var(--light);
      color: var(--text);
      transition: background 0.3s, color 0.3s;
      line-height: 1.6;
    }

    body.dark {
      background: var(--dark);
      color: var(--text-light);
    }

    header {
      position: sticky;
      top: 0;
      background: rgba(245, 245, 220, 0.95);
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 1000;
      transition: background 0.3s;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    body.dark header {
      background: rgba(26, 18, 11, 0.95);
    }

    .logo {
      font-size: 1.8rem;
      font-weight: bold;
      color: var(--primary);
      font-family: 'Abril Fatface', cursive;
      letter-spacing: 1px;
    }

    nav a {
      margin: 0 1rem;
      text-decoration: none;
      color: inherit;
      font-weight: 500;
      transition: 0.3s;
      position: relative;
      font-size: 1.1rem;
    }

    nav a:hover {
      color: var(--primary);
    }

    nav a::after {
      content: '';
      position: absolute;
      width: 0;
      height: 2px;
      bottom: -5px;
      left: 0;
      background-color: var(--primary);
      transition: width 0.3s;
    }

    nav a:hover::after {
      width: 100%;
    }

    .hero {
      height: 100vh;
      background: linear-gradient(rgba(26, 18, 11, 0.7), rgba(26, 18, 11, 0.7)), 
                  url('https://images.unsplash.com/photo-1516035069371-29a1b244cc32?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');
      background-size: cover;
      background-position: center;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      text-align: center;
      position: relative;
    }

    #particles-js {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      z-index: 1;
    }

    .hero-content {
      position: relative;
      z-index: 2;
      max-width: 800px;
      padding: 0 2rem;
    }

    .hero h1 {
      font-size: 3.5rem;
      margin-bottom: 1.5rem;
      font-family: 'Abril Fatface', cursive;
      letter-spacing: 2px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    }

    .hero p {
      font-size: 1.4rem;
      margin: 0 auto 2rem;
      max-width: 600px;
      font-style: italic;
    }

    .hero-btn {
      display: inline-block;
      background: var(--primary);
      color: var(--dark);
      padding: 0.8rem 2rem;
      border-radius: 30px;
      text-decoration: none;
      font-weight: bold;
      transition: all 0.3s;
      border: 2px solid var(--primary);
    }

    .hero-btn:hover {
      background: transparent;
      color: var(--primary);
      transform: translateY(-3px);
    }

    section {
      padding: 5rem 2rem;
    }

    .section-title {
      text-align: center;
      margin-bottom: 3rem;
      font-size: 2.5rem;
      color: var(--primary);
      font-family: 'Abril Fatface', cursive;
      position: relative;
    }

    .section-title::after {
      content: '';
      display: block;
      width: 80px;
      height: 4px;
      background: var(--primary);
      margin: 0.5rem auto;
    }

    .card {
      background: white;
      padding: 3rem;
      border-radius: 10px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      margin: 1rem auto;
      max-width: 900px;
      transition: all 0.3s;
      border: 1px solid rgba(232, 185, 89, 0.3);
    }

    body.dark .card {
      background: #2A2118;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      border-color: rgba(232, 185, 89, 0.2);
    }

    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1.5rem;
      margin-top: 2rem;
    }

    .gallery-item {
      position: relative;
      overflow: hidden;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      transition: all 0.3s;
      aspect-ratio: 1/1;
    }

    .gallery-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s;
    }

    .gallery-item:hover {
      transform: translateY(-10px);
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
    }

    .gallery-item:hover img {
      transform: scale(1.1);
    }

    .gallery-caption {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
      color: white;
      padding: 1rem;
      transform: translateY(100%);
      transition: transform 0.3s;
    }

    .gallery-item:hover .gallery-caption {
      transform: translateY(0);
    }

    .skills .skill {
      margin-bottom: 2rem;
    }

    .skill p {
      margin-bottom: 0.8rem;
      font-weight: 500;
      display: flex;
      justify-content: space-between;
    }

    .skill-bar-container {
      width: 100%;
      height: 12px;
      background-color: #e0e0e0;
      border-radius: 10px;
      overflow: hidden;
    }

    body.dark .skill-bar-container {
      background-color: #3A2D1F;
    }

    .skill-bar {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--accent));
      width: 0;
      border-radius: 10px;
      transition: width 1.5s ease-out;
      position: relative;
    }

    .skill-bar::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg, 
                rgba(255,255,255,0.3) 0%, 
                rgba(255,255,255,0.1) 100%);
      border-radius: 10px;
    }

    .testimonial {
      font-style: italic;
      background-color: rgba(232, 185, 89, 0.1);
      padding: 2rem;
      border-left: 5px solid var(--primary);
      margin-bottom: 1.5rem;
      border-radius: 8px;
      transition: all 0.3s;
      position: relative;
    }

    body.dark .testimonial {
      background-color: rgba(26, 18, 11, 0.5);
    }

    .testimonial::before {
      content: '\201C';
      font-size: 4rem;
      color: var(--primary);
      opacity: 0.2;
      position: absolute;
      top: 10px;
      left: 10px;
      font-family: serif;
    }

    .testimonial p:first-of-type {
      margin-top: 1rem;
      font-size: 1.1rem;
      line-height: 1.8;
    }

    .testimonial-author {
      font-weight: bold;
      color: var(--primary);
      margin-top: 1rem;
      font-style: normal;
    }

    footer {
      text-align: center;
      padding: 3rem 2rem;
      background: var(--secondary);
      color: white;
      transition: background 0.3s;
    }

    body.dark footer {
      background: #1A120B;
    }

    .footer-logo {
      font-size: 2rem;
      font-weight: bold;
      color: var(--primary);
      margin-bottom: 1rem;
      font-family: 'Abril Fatface', cursive;
    }

    .footer-text {
      max-width: 600px;
      margin: 0 auto 2rem;
    }

    .socials {
      display: flex;
      justify-content: center;
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    .socials a {
      color: white;
      font-size: 1.5rem;
      transition: all 0.3s;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(255, 255, 255, 0.1);
    }

    .socials a:hover {
      color: var(--primary);
      background: rgba(232, 185, 89, 0.2);
      transform: translateY(-5px);
    }

    .copyright {
      margin-top: 2rem;
      font-size: 0.9rem;
      opacity: 0.8;
    }

    #toTopBtn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 99;
      background-color: var(--primary);
      color: var(--dark);
      border: none;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      font-size: 1.2rem;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      transition: all 0.3s;
    }

    #toTopBtn:hover {
      transform: translateY(-5px) scale(1.1);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
    }

    /* Loader styles */
    #loader {
      position: fixed;
      width: 100vw;
      height: 100vh;
      background: var(--dark);
      z-index: 9999;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      transition: opacity 0.5s, visibility 0.5s;
    }

    .loader-content {
      text-align: center;
      margin-top: 30px;
      color: var(--primary);
      font-size: 1.5rem;
      font-family: 'Abril Fatface', cursive;
    }

    .afro-spinner {
      width: 80px;
      height: 80px;
      position: relative;
    }

    .afro-spinner::before,
    .afro-spinner::after {
      content: '';
      position: absolute;
      border-radius: 50%;
      animation: afroSpin 2s linear infinite;
    }

    .afro-spinner::before {
      width: 100%;
      height: 100%;
      border: 8px solid transparent;
      border-top-color: var(--primary);
      border-bottom-color: var(--primary);
    }

    .afro-spinner::after {
      width: 60%;
      height: 60%;
      top: 20%;
      left: 20%;
      border: 8px solid transparent;
      border-left-color: var(--accent);
      border-right-color: var(--accent);
      animation-direction: reverse;
    }

    @keyframes afroSpin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Dark mode toggle */
    #darkToggle {
      cursor: pointer;
      font-size: 1.5rem;
      transition: all 0.3s;
      color: var(--text);
      background: rgba(232, 185, 89, 0.1);
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    body.dark #darkToggle {
      color: var(--primary);
    }

    #darkToggle:hover {
      transform: rotate(30deg) scale(1.1);
      background: rgba(232, 185, 89, 0.2);
    }

    /* Clock styles */
    #clock {
      position: fixed;
      bottom: 20px;
      left: 20px;
      background: var(--primary);
      color: var(--dark);
      padding: 10px 15px;
      border-radius: 30px;
      font-weight: bold;
      font-size: 14px;
      font-family: 'Courier New', monospace;
      z-index: 999;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      transition: all 0.3s;
    }

    #clock:hover {
      transform: translateY(-3px);
    }

    /* WhatsApp float button */
    .wa-float {
      position: fixed;
      bottom: 80px;
      right: 20px;
      background-color: #25D366;
      color: white;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 30px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      transition: all 0.3s ease;
      z-index: 999;
      text-decoration: none;
    }

    .wa-float:hover {
      transform: scale(1.1) translateY(-5px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.3);
    }

    /* Form styles */
    form input,
    form textarea,
    form select {
      display: block;
      width: 100%;
      padding: 1rem;
      margin-bottom: 1.5rem;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-family: inherit;
      font-size: 1rem;
      transition: all 0.3s;
      background: rgba(255, 255, 255, 0.8);
    }

    body.dark form input,
    body.dark form textarea,
    body.dark form select {
      background: rgba(58, 45, 31, 0.8);
      border-color: #3A2D1F;
      color: var(--text-light);
    }

    form input:focus,
    form textarea:focus,
    form select:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(232, 185, 89, 0.2);
    }

    form label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
      color: var(--primary);
    }

    form button {
      background-color: var(--primary);
      color: var(--dark);
      border: none;
      padding: 1rem 2.5rem;
      border-radius: 30px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: bold;
      transition: all 0.3s;
      display: inline-block;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    form button:hover {
      background-color: var(--accent);
      color: white;
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(216, 90, 66, 0.3);
    }

    /* Success message styles */
    .form-success {
      display: none;
      background: var(--success);
      color: white;
      padding: 2rem;
      border-radius: 10px;
      text-align: center;
      margin-top: 2rem;
      animation: fadeIn 0.5s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Finance Section Styles */
    .finance-summary {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
      margin-bottom: 3rem;
    }

    .summary-card {
      padding: 2rem;
      border-radius: 10px;
      text-align: center;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      transition: all 0.3s;
      border-top: 5px solid;
    }

    .summary-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 15px 30px rgba(0,0,0,0.15);
    }

    .summary-card h3 {
      margin-top: 0;
      font-size: 1.1rem;
      color: #666;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-weight: 600;
    }

    body.dark .summary-card h3 {
      color: #aaa;
    }

    .summary-card p {
      font-size: 1.8rem;
      font-weight: bold;
      margin: 1rem 0 0;
    }

    .income-card {
      background: rgba(76, 175, 80, 0.1);
      border-top-color: var(--success);
    }

    .expense-card {
      background: rgba(216, 90, 66, 0.1);
      border-top-color: var(--danger);
    }

    .balance-card {
      background: rgba(232, 185, 89, 0.1);
      border-top-color: var(--primary);
    }

    .tabs {
      display: flex;
      border-bottom: 2px solid rgba(232, 185, 89, 0.3);
      margin-bottom: 2rem;
    }

    body.dark .tabs {
      border-bottom-color: rgba(232, 185, 89, 0.2);
    }

    .tab {
      padding: 1rem 2rem;
      cursor: pointer;
      border-bottom: 3px solid transparent;
      transition: all 0.3s;
      font-weight: 500;
      position: relative;
    }

    .tab.active {
      color: var(--primary);
      font-weight: bold;
    }

    .tab.active::after {
      content: '';
      position: absolute;
      bottom: -3px;
      left: 0;
      right: 0;
      height: 3px;
      background: var(--primary);
    }

    .tab-content {
      display: none;
      animation: fadeIn 0.5s ease-out;
    }

    .tab-content.active {
      display: block;
    }

    .finance-controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .filter-group {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .filter-group button {
      padding: 0.7rem 1.5rem;
      border: none;
      background: #f0f0f0;
      border-radius: 30px;
      cursor: pointer;
      transition: all 0.3s;
      font-weight: 500;
    }

    body.dark .filter-group button {
      background: #3A2D1F;
      color: var(--text-light);
    }

    .filter-group button.active {
      background: var(--primary);
      color: var(--dark);
    }

    .month-filter {
      padding: 0.7rem 1rem;
      border-radius: 30px;
      border: 1px solid #ddd;
      background: white;
      min-width: 180px;
    }

    body.dark .month-filter {
      background: #3A2D1F;
      border-color: #3A2D1F;
      color: var(--text-light);
    }

    .transaction-list {
      margin-top: 2rem;
    }

    .transaction-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1.5rem;
      border-bottom: 1px solid rgba(232, 185, 89, 0.2);
      transition: all 0.3s;
    }

    body.dark .transaction-item {
      border-bottom-color: rgba(232, 185, 89, 0.1);
    }

    .transaction-item:hover {
      background: rgba(232, 185, 89, 0.05);
      transform: translateX(5px);
    }

    body.dark .transaction-item:hover {
      background: rgba(232, 185, 89, 0.05);
    }

    .transaction-details {
      flex: 1;
    }

    .transaction-amount {
      font-weight: bold;
      font-size: 1.1rem;
      display: flex;
      align-items: center;
    }

    .income {
      color: var(--success);
    }

    .expense {
      color: var(--danger);
    }

    .transaction-date {
      font-size: 0.9rem;
      color: #666;
      margin-top: 0.3rem;
    }

    body.dark .transaction-date {
      color: #aaa;
    }

    .transaction-category {
      display: inline-block;
      padding: 0.3rem 0.8rem;
      border-radius: 20px;
      font-size: 0.8rem;
      background: rgba(232, 185, 89, 0.2);
      margin-right: 0.5rem;
      color: var(--primary);
      font-weight: 500;
    }

    body.dark .transaction-category {
      background: rgba(232, 185, 89, 0.3);
    }

    .chart-container {
      position: relative;
      height: 400px;
      margin-top: 2rem;
    }

    .delete-btn {
      color: var(--danger);
      background: none;
      border: none;
      cursor: pointer;
      margin-left: 1rem;
      opacity: 0.7;
      transition: all 0.3s;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    .delete-btn:hover {
      opacity: 1;
      background: rgba(216, 90, 66, 0.1);
    }

    /* Login Page Styles */
    .login-container {
      display: flex;
      min-height: 100vh;
      background: linear-gradient(rgba(26, 18, 11, 0.8), rgba(26, 18, 11, 0.8)), 
                  url('https://images.unsplash.com/photo-1516035069371-29a1b244cc32?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');
      background-size: cover;
      background-position: center;
    }

    .login-wrapper {
      width: 100%;
      max-width: 500px;
      margin: auto;
      padding: 2rem;
      background: rgba(245, 245, 220, 0.9);
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      border: 2px solid var(--primary);
    }

    body.dark .login-wrapper {
      background: rgba(26, 18, 11, 0.9);
    }

    .login-header {
      text-align: center;
      margin-bottom: 2rem;
    }

    .login-header h1 {
      font-family: 'Cinzel Decorative', cursive;
      color: var(--primary);
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
    }

    .login-header p {
      color: var(--text);
      font-style: italic;
    }

    body.dark .login-header p {
      color: var(--text-light);
    }

    .login-form .form-group,
    .register-form .form-group {
      margin-bottom: 1.5rem;
      position: relative;
    }

    .login-form label,
    .register-form label {
      display: block;
      margin-bottom: 0.5rem;
      color: var(--primary);
      font-weight: 500;
    }

    .login-form input,
    .register-form input {
      width: 100%;
      padding: 12px 15px;
      border: 2px solid #ddd;
      border-radius: 30px;
      font-size: 1rem;
      transition: all 0.3s;
      background: rgba(255, 255, 255, 0.8);
    }

    body.dark .login-form input,
    body.dark .register-form input {
      background: rgba(58, 45, 31, 0.8);
      border-color: #3A2D1F;
      color: var(--text-light);
    }

    .login-form input:focus,
    .register-form input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(232, 185, 89, 0.3);
    }

    .login-btn {
      width: 100%;
      padding: 12px;
      background: var(--primary);
      color: var(--dark);
      border: none;
      border-radius: 30px;
      font-size: 1.1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-top: 1rem;
    }

    .login-btn:hover {
      background: var(--accent);
      color: white;
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(216, 90, 66, 0.3);
    }

    .login-footer {
      text-align: center;
      margin-top: 2rem;
      color: var(--text);
    }

    body.dark .login-footer {
      color: var(--text-light);
    }

    .login-footer a {
      color: var(--primary);
      text-decoration: none;
      font-weight: 500;
    }

    .login-footer a:hover {
      text-decoration: underline;
    }

    .error-message {
      color: var(--danger);
      margin-top: 5px;
      font-size: 0.9rem;
    }

    /* African Pattern Decorations */
    .african-pattern {
      position: absolute;
      opacity: 0.1;
      z-index: 0;
    }

    .pattern-1 {
      top: 20px;
      left: 20px;
      width: 150px;
      height: 150px;
      background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="%23E8B959" d="M50 0 L100 50 L50 100 L0 50 Z"/></svg>');
      background-size: contain;
    }

    .pattern-2 {
      bottom: 20px;
      right: 20px;
      width: 120px;
      height: 120px;
      background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle fill="%23D85A42" cx="50" cy="50" r="40"/></svg>');
      background-size: contain;
    }

    /* Switch between login and register */
    .auth-switch {
      display: none;
    }

    .auth-switch:checked ~ .login-form {
      display: none;
    }

    .auth-switch:checked ~ .register-form {
      display: block;
    }

    .register-form {
      display: none;
    }

    /* Dashboard Styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 1001;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0, 0, 0, 0.8);
    }

    .modal-content {
      background-color: var(--light);
      margin: 5% auto;
      padding: 2rem;
      border-radius: 10px;
      width: 80%;
      max-width: 900px;
      max-height: 80vh;
      overflow-y: auto;
      box-shadow: 0 5px 30px rgba(0, 0, 0, 0.3);
      position: relative;
    }

    body.dark .modal-content {
      background-color: var(--dark);
      border: 1px solid rgba(232, 185, 89, 0.3);
    }

    .close-modal {
      position: absolute;
      right: 20px;
      top: 20px;
      font-size: 1.5rem;
      color: var(--text);
      cursor: pointer;
      transition: all 0.3s;
    }

    body.dark .close-modal {
      color: var(--text-light);
    }

    .close-modal:hover {
      color: var(--primary);
      transform: rotate(90deg);
    }

    .dashboard-tabs {
      display: flex;
      border-bottom: 2px solid rgba(232, 185, 89, 0.3);
      margin-bottom: 1.5rem;
    }

    body.dark .dashboard-tabs {
      border-bottom-color: rgba(232, 185, 89, 0.2);
    }

    .dashboard-tab {
      padding: 0.8rem 1.5rem;
      cursor: pointer;
      border: none;
      background: none;
      font-family: inherit;
      font-size: 1rem;
      color: var(--text);
      border-bottom: 3px solid transparent;
      transition: all 0.3s;
      font-weight: 500;
      position: relative;
    }

    body.dark .dashboard-tab {
      color: var(--text-light);
    }

    .dashboard-tab.active {
      color: var(--primary);
      font-weight: bold;
    }

    .dashboard-tab.active::after {
      content: '';
      position: absolute;
      bottom: -3px;
      left: 0;
      right: 0;
      height: 3px;
      background: var(--primary);
    }

    .dashboard-tab-content {
      display: none;
      animation: fadeIn 0.5s ease-out;
    }

    .dashboard-tab-content.active {
      display: block;
    }

    .btn-primary {
      background-color: var(--primary);
      color: var(--dark);
      border: none;
      padding: 0.7rem 1.5rem;
      border-radius: 30px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: bold;
      transition: all 0.3s;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }

    .btn-primary:hover {
      background-color: var(--accent);
      color: white;
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(216, 90, 66, 0.3);
    }

    .btn-secondary {
      background-color: rgba(232, 185, 89, 0.1);
      color: var(--primary);
      border: 1px solid var(--primary);
      padding: 0.7rem 1.5rem;
      border-radius: 30px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: bold;
      transition: all 0.3s;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }

    body.dark .btn-secondary {
      background-color: rgba(232, 185, 89, 0.2);
    }

    .btn-secondary:hover {
      background-color: rgba(232, 185, 89, 0.3);
      transform: translateY(-3px);
    }

    .search-box {
      position: relative;
      display: inline-block;
      margin-left: 1rem;
    }

    .search-box input {
      padding: 0.7rem 1rem 0.7rem 2.5rem;
      border-radius: 30px;
      border: 1px solid #ddd;
      min-width: 250px;
      font-size: 1rem;
      transition: all 0.3s;
    }

    body.dark .search-box input {
      background: rgba(58, 45, 31, 0.8);
      border-color: #3A2D1F;
      color: var(--text-light);
    }

    .search-box i {
      position: absolute;
      left: 15px;
      top: 50%;
      transform: translateY(-50%);
      color: #666;
    }

    body.dark .search-box i {
      color: #aaa;
    }

    /* Notes Styles */
    .notes-controls {
      display: flex;
      justify-content: space-between;
      margin-bottom: 1.5rem;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .notes-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 1.5rem;
    }

    .note-card {
      background: white;
      border-radius: 8px;
      padding: 1.5rem;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
      transition: all 0.3s;
      border-left: 4px solid var(--primary);
      cursor: pointer;
      position: relative;
    }

    body.dark .note-card {
      background: #2A2118;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
    }

    .note-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
    }

    .note-card h3 {
      margin-top: 0;
      color: var(--primary);
      font-size: 1.2rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .note-card .note-content-preview {
      color: var(--text);
      font-size: 0.9rem;
      margin: 0.5rem 0;
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    body.dark .note-card .note-content-preview {
      color: var(--text-light);
    }

    .note-card .note-meta {
      display: flex;
      justify-content: space-between;
      font-size: 0.8rem;
      color: #666;
      margin-top: 1rem;
    }

    body.dark .note-card .note-meta {
      color: #aaa;
    }

    .note-card .note-category {
      background: rgba(232, 185, 89, 0.2);
      color: var(--primary);
      padding: 0.2rem 0.5rem;
      border-radius: 20px;
      font-size: 0.7rem;
      font-weight: 500;
    }

    body.dark .note-card .note-category {
      background: rgba(232, 185, 89, 0.3);
    }

    .note-card .note-actions {
      position: absolute;
      top: 10px;
      right: 10px;
      opacity: 0;
      transition: opacity 0.3s;
    }

    .note-card:hover .note-actions {
      opacity: 1;
    }

    .note-card .note-actions button {
      background: none;
      border: none;
      color: #666;
      cursor: pointer;
      margin-left: 0.5rem;
      font-size: 0.9rem;
    }

    body.dark .note-card .note-actions button {
      color: #aaa;
    }

    .note-card .note-actions button:hover {
      color: var(--primary);
    }

    /* Files Styles */
    .files-controls {
      display: flex;
      justify-content: space-between;
      margin-bottom: 1.5rem;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .file-filters {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .filter-btn {
      padding: 0.5rem 1rem;
      border: none;
      background: #f0f0f0;
      border-radius: 30px;
      cursor: pointer;
      transition: all 0.3s;
      font-weight: 500;
      font-size: 0.9rem;
    }

    body.dark .filter-btn {
      background: #3A2D1F;
      color: var(--text-light);
    }

    .filter-btn.active {
      background: var(--primary);
      color: var(--dark);
    }

    .files-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 1.5rem;
    }

    .file-card {
      background: white;
      border-radius: 8px;
      padding: 1rem;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
      transition: all 0.3s;
      text-align: center;
      position: relative;
    }

    body.dark .file-card {
      background: #2A2118;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
    }

    .file-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
    }

    .file-icon {
      font-size: 3rem;
      color: var(--primary);
      margin-bottom: 0.5rem;
    }

    .file-card h3 {
      margin: 0.5rem 0;
      font-size: 1rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .file-card .file-meta {
      font-size: 0.8rem;
      color: #666;
      margin-top: 0.5rem;
    }

    body.dark .file-card .file-meta {
      color: #aaa;
    }

    .file-card .file-actions {
      position: absolute;
      top: 10px;
      right: 10px;
      opacity: 0;
      transition: opacity 0.3s;
    }

    .file-card:hover .file-actions {
      opacity: 1;
    }

    .file-card .file-actions button {
      background: none;
      border: none;
      color: #666;
      cursor: pointer;
      margin-left: 0.5rem;
      font-size: 0.9rem;
    }

    body.dark .file-card .file-actions button {
      color: #aaa;
    }

    .file-card .file-actions button:hover {
      color: var(--primary);
    }

    /* Bookmarks Styles */
    .bookmarks-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 1.5rem;
    }

    .bookmark-card {
      background: white;
      border-radius: 8px;
      padding: 1.5rem;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
      transition: all 0.3s;
      border-left: 4px solid var(--accent);
      position: relative;
    }

    body.dark .bookmark-card {
      background: #2A2118;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
    }

    .bookmark-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
    }

    .bookmark-card h3 {
      margin-top: 0;
      color: var(--accent);
      font-size: 1.2rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .bookmark-card .bookmark-url {
      color: #666;
      font-size: 0.9rem;
      margin: 0.5rem 0;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    body.dark .bookmark-card .bookmark-url {
      color: #aaa;
    }

    .bookmark-card .bookmark-notes {
      color: var(--text);
      font-size: 0.9rem;
      margin: 0.5rem 0;
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    body.dark .bookmark-card .bookmark-notes {
      color: var(--text-light);
    }

    .bookmark-card .bookmark-meta {
      display: flex;
      justify-content: space-between;
      font-size: 0.8rem;
      color: #666;
      margin-top: 1rem;
    }

    body.dark .bookmark-card .bookmark-meta {
      color: #aaa;
    }

    .bookmark-card .bookmark-category {
      background: rgba(216, 90, 66, 0.2);
      color: var(--accent);
      padding: 0.2rem 0.5rem;
      border-radius: 20px;
      font-size: 0.7rem;
      font-weight: 500;
    }

    body.dark .bookmark-card .bookmark-category {
      background: rgba(216, 90, 66, 0.3);
    }

    .bookmark-card .bookmark-actions {
      position: absolute;
      top: 10px;
      right: 10px;
      opacity: 0;
      transition: opacity 0.3s;
    }

    .bookmark-card:hover .bookmark-actions {
      opacity: 1;
    }

    .bookmark-card .bookmark-actions button {
      background: none;
      border: none;
      color: #666;
      cursor: pointer;
      margin-left: 0.5rem;
      font-size: 0.9rem;
    }

    body.dark .bookmark-card .bookmark-actions button {
      color: #aaa;
    }

    .bookmark-card .bookmark-actions button:hover {
      color: var(--accent);
    }

    /* Projects Styles */
    .projects-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 1.5rem;
    }

    .project-card {
      background: white;
      border-radius: 8px;
      padding: 1.5rem;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
      transition: all 0.3s;
      border-left: 4px solid var(--secondary);
      position: relative;
    }

    body.dark .project-card {
      background: #2A2118;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
    }

    .project-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
    }

    .project-card h3 {
      margin-top: 0;
      color: var(--secondary);
      font-size: 1.2rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .project-card .project-description {
      color: var(--text);
      font-size: 0.9rem;
      margin: 0.5rem 0;
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    body.dark .project-card .project-description {
      color: var(--text-light);
    }

    .project-card .project-meta {
      display: flex;
      justify-content: space-between;
      font-size: 0.8rem;
      color: #666;
      margin-top: 1rem;
    }

    body.dark .project-card .project-meta {
      color: #aaa;
    }

    .project-card .project-category {
      background: rgba(94, 48, 35, 0.2);
      color: var(--secondary);
      padding: 0.2rem 0.5rem;
      border-radius: 20px;
      font-size: 0.7rem;
      font-weight: 500;
    }

    body.dark .project-card .project-category {
      background: rgba(94, 48, 35, 0.3);
    }

    .project-card .project-status {
      display: inline-block;
      padding: 0.2rem 0.5rem;
      border-radius: 20px;
      font-size: 0.7rem;
      font-weight: 500;
    }

    .project-status.planning {
      background: rgba(255, 152, 0, 0.2);
      color: #FF9800;
    }

    .project-status.in-progress {
      background: rgba(33, 150, 243, 0.2);
      color: #2196F3;
    }

    .project-status.completed {
      background: rgba(76, 175, 80, 0.2);
      color: #4CAF50;
    }

    .project-status.on-hold {
      background: rgba(158, 158, 158, 0.2);
      color: #9E9E9E;
    }

    .project-card .project-actions {
      position: absolute;
      top: 10px;
      right: 10px;
      opacity: 0;
      transition: opacity 0.3s;
    }

    .project-card:hover .project-actions {
      opacity: 1;
    }

    .project-card .project-actions button {
      background: none;
      border: none;
      color: #666;
      cursor: pointer;
      margin-left: 0.5rem;
      font-size: 0.9rem;
    }

    body.dark .project-card .project-actions button {
      color: #aaa;
    }

    .project-card .project-actions button:hover {
      color: var(--secondary);
    }

    /* Form Styles */
    .form-group {
      margin-bottom: 1.5rem;
    }

    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      color: var(--primary);
      font-weight: 500;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 0.8rem;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-family: inherit;
      font-size: 1rem;
      transition: all 0.3s;
      background: rgba(255, 255, 255, 0.8);
    }

    body.dark .form-group input,
    body.dark .form-group select,
    body.dark .form-group textarea {
      background: rgba(58, 45, 31, 0.8);
      border-color: #3A2D1F;
      color: var(--text-light);
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(232, 185, 89, 0.2);
    }

    .form-actions {
      display: flex;
      justify-content: flex-end;
      gap: 1rem;
      margin-top: 2rem;
    }

    /* File Upload Progress */
    .file-upload-progress {
      background: white;
      padding: 1rem;
      border-radius: 8px;
      margin-bottom: 1rem;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    body.dark .file-upload-progress {
      background: #2A2118;
    }

    .file-upload-info {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
    }

    .progress-bar {
      height: 8px;
      background: #f0f0f0;
      border-radius: 4px;
      overflow: hidden;
    }

    body.dark .progress-bar {
      background: #3A2D1F;
    }

    .progress {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--accent));
      width: 0%;
      transition: width 0.3s;
    }

    .upload-error {
      color: var(--danger);
      padding: 0.5rem;
    }

    /* Project File Item */
    .project-file-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.5rem;
      background: rgba(232, 185, 89, 0.1);
      border-radius: 5px;
      margin-bottom: 0.5rem;
    }

    body.dark .project-file-item {
      background: rgba(232, 185, 89, 0.2);
    }

    .project-file-item .remove-file {
      background: none;
      border: none;
      color: var(--danger);
      cursor: pointer;
    }

    /* Loading and No Data States */
    .loading {
      text-align: center;
      padding: 2rem;
      color: var(--primary);
    }

    .no-data {
      text-align: center;
      padding: 2rem;
      color: #666;
    }

    body.dark .no-data {
      color: #aaa;
    }

    /* Responsive Styles */
    @media (max-width: 992px) {
      .hero h1 {
        font-size: 2.8rem;
      }
      
      .section-title {
        font-size: 2.2rem;
      }
    }

    @media (max-width: 768px) {
      header {
        flex-direction: column;
        padding: 1rem;
      }
      
      nav {
        margin-top: 1.5rem;
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
      }
    
      nav a {
        margin: 0.5rem;
        font-size: 1rem;
      }
      
      .hero h1 {
        font-size: 2.2rem;
      }
      
      .hero p {
        font-size: 1.1rem;
      }
      
      section {
        padding: 3rem 1rem;
      }
      
      .card {
        padding: 2rem;
      }
      
      .gallery {
        grid-template-columns: 1fr;
      }

      #clock {
        position: static;
        display: inline-block;
        margin-top: 1rem;
      }

      .finance-summary {
        grid-template-columns: 1fr;
      }

      .finance-controls {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .tabs {
        flex-wrap: wrap;
      }
      
      .tab {
        padding: 0.8rem 1.2rem;
        font-size: 0.9rem;
      }

      .login-wrapper {
        width: 90%;
        padding: 1.5rem;
      }

      .modal-content {
        width: 90%;
        margin: 10% auto;
        padding: 1.5rem;
      }
      
      .dashboard-tabs {
        flex-wrap: wrap;
      }
      
      .dashboard-tab {
        padding: 0.6rem 1rem;
        font-size: 0.9rem;
      }
      
      .notes-list,
      .bookmarks-list,
      .projects-grid {
        grid-template-columns: 1fr;
      }
      
      .files-grid {
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      }
      
      .notes-controls,
      .files-controls,
      .bookmark-controls,
      .projects-controls {
        flex-direction: column;
      }
      
      .search-box {
        margin-left: 0;
        margin-top: 1rem;
        width: 100%;
      }
      
      .search-box input {
        width: 100%;
        min-width: auto;
      }
    }

    @media (max-width: 480px) {
      .hero h1 {
        font-size: 1.8rem;
      }
      
      .section-title {
        font-size: 1.8rem;
      }
      
      .card {
        padding: 1.5rem;
      }
      
      .testimonial {
        padding: 1.5rem;
      }
      
      .testimonial::before {
        font-size: 3rem;
      }
      
      form button {
        width: 100%;
      }

      .login-header h1 {
        font-size: 2rem;
      }

      .modal-content {
        width: 95%;
        margin: 5% auto;
        padding: 1rem;
      }
      
      .form-actions {
        flex-direction: column;
      }
      
      .btn-primary,
      .btn-secondary {
        width: 100%;
        justify-content: center;
      }
    }
  </style>
</head>

<body>
  <!-- Login Page -->
  <div id="login-page" class="login-container">
    <div class="african-pattern pattern-1"></div>
    <div class="african-pattern pattern-2"></div>
    
    <div class="login-wrapper">
      <div class="login-header">
        <h1>Laksmana</h1>
        <p>Masuk untuk mengakses portofolio lengkap</p>
      </div>
      
      <input type="checkbox" id="switch-form" class="auth-switch">
      
      <!-- Login Form -->
      <form id="login-form" class="login-form">
        <div class="form-group">
          <label for="login-email">Email</label>
          <input type="email" id="login-email" required>
        </div>
        
        <div class="form-group">
          <label for="login-password">Password</label>
          <input type="password" id="login-password" required>
        </div>
        
        <button type="submit" class="login-btn">Masuk</button>
        
        <div class="login-footer">
          Belum punya akun? <label for="switch-form" style="cursor: pointer; color: var(--primary);">Daftar disini</label>
        </div>
      </form>
      
      <!-- Register Form -->
      <form id="register-form" class="register-form">
        <div class="form-group">
          <label for="register-name">Nama Lengkap</label>
          <input type="text" id="register-name" required>
        </div>
        
        <div class="form-group">
          <label for="register-email">Email</label>
          <input type="email" id="register-email" required>
        </div>
        
        <div class="form-group">
          <label for="register-password">Password</label>
          <input type="password" id="register-password" required>
        </div>
        
        <div class="form-group">
          <label for="register-confirm">Konfirmasi Password</label>
          <input type="password" id="register-confirm" required>
        </div>
        
        <button type="submit" class="login-btn">Daftar</button>
        
        <div class="login-footer">
          Sudah punya akun? <label for="switch-form" style="cursor: pointer; color: var(--primary);">Masuk disini</label>
        </div>
      </form>
    </div>
  </div>

  <!-- Main Content (akan ditampilkan setelah login) -->
  <div id="main-content" style="display: none;">
    <div id="loader">
      <div class="afro-spinner"></div>
      <div class="loader-content">Laksmana Portofolio</div>
    </div>

    <header>
      <div class="logo">Laksmana</div>
      <nav>
        <a href="#about">Tentang</a>
        <a href="#portfolio">Portofolio</a>
        <a href="#skills">Skill</a>
        <a href="#finance">Keuangan</a>
        <a href="#testimoni">Testimoni</a>
        <a href="#contact">Kontak</a>
        <i id="darkToggle" class="fas fa-moon"></i>
        <a href="#" id="logout-btn"><i class="fas fa-sign-out-alt"></i></a>
      </nav>
    </header>

    <section class="hero">
      <div id="particles-js"></div>
      <div class="hero-content">
        <h1><span id="typed"></span></h1>
        <p>Membawa kehangatan Afrika dalam setiap karya digital</p>
        <a href="#portfolio" class="hero-btn">Lihat Karya Saya</a>
      </div>
    </section>

    <section id="about">
      <div class="card" data-aos="fade-up">
        <h2 class="section-title">Tentang Saya</h2>
        <div style="display: flex; flex-direction: column; gap: 2rem;">
          <div style="display: flex; align-items: center; gap: 2rem;">
            <img src="https://ik.imagekit.io/gcv2ysaez/LAKSAGYM.jpg?updatedAt=1753315908942" alt="Foto Profil" style="width: 200px; height: 200px; border-radius: 50%; object-fit: cover; border: 5px solid var(--primary);">
            <div>
              <h3 style="color: var(--primary); margin-top: 0;">Laksmana - Web Developer & Desainer</h3>
              <p>Halo! Saya Laksmana, seorang web developer dan kreator digital yang terinspirasi oleh keindahan budaya Afrika. Saya menggabungkan estetika klasik Afrika dengan teknologi modern untuk menciptakan pengalaman digital yang memukau.</p>
              <p>Dengan lebih dari 3 tahun pengalaman dalam pengembangan website, saya berspesialisasi dalam menciptakan solusi yang indah, fungsional, dan berpusat pada pengguna.</p>
            </div>
          </div>
          <div>
            <h4 style="color: var(--primary);">Filosofi Desain</h4>
            <p>Saya percaya bahwa desain yang baik adalah perpaduan antara bentuk dan fungsi, seperti halnya seni Afrika tradisional yang tidak hanya indah tetapi juga penuh makna dan tujuan. Setiap proyek yang saya kerjakan membawa sentuhan kehangatan dan keaslian Afrika yang klasik.</p>
          </div>
        </div>
      </div>
    </section>

    <section id="portfolio">
      <div class="card" data-aos="fade-up">
        <h2 class="section-title">Portofolio</h2>
        <div class="gallery">
          <div class="gallery-item">
            <img src="https://ik.imagekit.io/gcv2ysaez/LAKSAGYM.jpg?updatedAt=1753315908942" alt="Proyek Gym">
            <div class="gallery-caption">Desain Website Gym</div>
          </div>
          <div class="gallery-item">
            <img src="https://ik.imagekit.io/gcv2ysaez/LAKSAGYM2.jpg?updatedAt=1753315908139" alt="Proyek Gym 2">
            <div class="gallery-caption">Aplikasi Fitness Mobile</div>
          </div>
          <div class="gallery-item">
            <img src="https://ik.imagekit.io/gcv2ysaez/LAKSA3.jpg?updatedAt=1753315907855" alt="Proyek Artis">
            <div class="gallery-caption">Portofolio Artis</div>
          </div>
          <div class="gallery-item">
            <img src="https://ik.imagekit.io/gcv2ysaez/LAKSA4.jpg?updatedAt=1753314348810" alt="Proyek Personal">
            <div class="gallery-caption">Karya Fotografi Personal</div>
          </div>
        </div>
      </div>
    </section>

    <section id="skills" class="skills">
      <div class="card" data-aos="fade-up">
        <h2 class="section-title">Skill</h2>
        <div class="skill">
          <p>HTML <span>90%</span></p>
          <div class="skill-bar-container">
            <div class="skill-bar" data-level="90%"></div>
          </div>
        </div>
        <div class="skill">
          <p>CSS <span>85%</span></p>
          <div class="skill-bar-container">
            <div class="skill-bar" data-level="85%"></div>
          </div>
        </div>
        <div class="skill">
          <p>JavaScript <span>80%</span></p>
          <div class="skill-bar-container">
            <div class="skill-bar" data-level="80%"></div>
          </div>
        </div>
        <div class="skill">
          <p>React <span>75%</span></p>
          <div class="skill-bar-container">
            <div class="skill-bar" data-level="75%"></div>
          </div>
        </div>
        <div class="skill">
          <p>Node.js <span>70%</span></p>
          <div class="skill-bar-container">
            <div class="skill-bar" data-level="70%"></div>
          </div>
        </div>
      </div>
    </section>

    <section id="finance">
      <div class="card" data-aos="fade-up">
        <h2 class="section-title">Keuangan Pribadi</h2>
        
        <div class="finance-summary">
          <div class="summary-card income-card">
            <h3>Total Pemasukan</h3>
            <p id="total-income">Rp0</p>
          </div>
          <div class="summary-card expense-card">
            <h3>Total Pengeluaran</h3>
            <p id="total-expense">Rp0</p>
          </div>
          <div class="summary-card balance-card">
            <h3>Saldo</h3>
            <p id="total-balance">Rp0</p>
          </div>
        </div>
        
        <div class="tabs">
          <div class="tab active" data-tab="transactions">Transaksi</div>
          <div class="tab" data-tab="stats">Statistik</div>
          <div class="tab" data-tab="add">Tambah Transaksi</div>
        </div>
        
        <div class="tab-content active" id="transactions-tab">
          <div class="finance-controls">
            <div class="filter-group">
              <button id="filter-all" class="active">Semua</button>
              <button id="filter-income">Pemasukan</button>
              <button id="filter-expense">Pengeluaran</button>
            </div>
            <div>
              <select id="month-filter" class="month-filter">
                <option value="all">Semua Bulan</option>
                <option value="1">Januari</option>
                <option value="2">Februari</option>
                <option value="3">Maret</option>
                <option value="4">April</option>
                <option value="5">Mei</option>
                <option value="6">Juni</option>
                <option value="7">Juli</option>
                <option value="8">Agustus</option>
                <option value="9">September</option>
                <option value="10">Oktober</option>
                <option value="11">November</option>
                <option value="12">Desember</option>
              </select>
            </div>
          </div>
          
          <div class="transaction-list" id="transaction-list">
            <!-- Transaksi akan dimuat di sini -->
          </div>
        </div>
        
        <div class="tab-content" id="stats-tab">
          <div class="chart-container">
            <canvas id="finance-chart"></canvas>
          </div>
        </div>
        
        <div class="tab-content" id="add-tab">
          <form id="transaction-form">
            <div>
              <label for="transaction-type">Jenis Transaksi</label>
              <select id="transaction-type" name="type" required>
                <option value="income">Pemasukan</option>
                <option value="expense">Pengeluaran</option>
              </select>
            </div>
            
            <div>
              <label for="transaction-amount">Jumlah (Rp)</label>
              <input type="number" id="transaction-amount" name="amount" min="0" required>
            </div>
            
            <div>
              <label for="transaction-category">Kategori</label>
              <select id="transaction-category" name="category" required>
                <option value="gaji">Gaji</option>
                <option value="freelance">Freelance</option>
                <option value="investasi">Investasi</option>
                <option value="lainnya">Lainnya (Pemasukan)</option>
                <option value="makanan">Makanan</option>
                <option value="transportasi">Transportasi</option>
                <option value="hiburan">Hiburan</option>
                <option value="belanja">Belanja</option>
                <option value="tagihan">Tagihan</option>
                <option value="lainnya">Lainnya (Pengeluaran)</option>
              </select>
            </div>
            
            <div>
              <label for="transaction-date">Tanggal</label>
              <input type="date" id="transaction-date" name="date" required>
            </div>
            
            <div>
              <label for="transaction-description">Deskripsi (Opsional)</label>
              <textarea id="transaction-description" name="description" rows="3"></textarea>
            </div>
            
            <button type="submit">Simpan Transaksi</button>
          </form>
        </div>
      </div>
    </section>

    <section id="testimoni">
      <div class="card" data-aos="fade-up">
        <h2 class="section-title">Testimoni</h2>
        <div class="testimonial">
          <p>"Laksmana membawa sentuhan unik Afrika ke dalam desain web yang modern. Karyanya tidak hanya indah tetapi juga sangat fungsional. Dia memahami kebutuhan klien dengan sangat baik dan selalu memberikan hasil yang melebihi ekspektasi."</p>
          <p class="testimonial-author">- Budi, CEO PT. Maju Jaya</p>
        </div>
        <div class="testimonial">
          <p>"Saya sangat terkesan dengan pendekatan kreatif Laksmana. Dia menggabungkan elemen-elemen budaya Afrika dengan teknologi modern untuk menciptakan pengalaman pengguna yang benar-benar unik dan memikat. Proyek kami selesai tepat waktu dengan kualitas yang luar biasa."</p>
          <p class="testimonial-author">- Ani, Marketing Manager</p>
        </div>
      </div>
    </section>

    <section id="contact">
      <div class="card" data-aos="fade-up">
        <h2 class="section-title">Kontak Saya</h2>
        <form id="contactForm" action="https://formspree.io/f/xkgrrjbv" method="POST">
          <div>
            <label for="name">Nama</label>
            <input type="text" id="name" name="name" placeholder="Nama Anda" required>
          </div>
          
          <div>
            <label for="email">Email</label>
            <input type="email" id="email" name="_replyto" placeholder="Email Anda" required>
          </div>
          
          <div>
            <label for="message">Pesan</label>
            <textarea id="message" name="message" placeholder="Pesan Anda" rows="5" required></textarea>
          </div>
          
          <!-- Hidden fields for Formspree features -->
          <input type="hidden" name="_subject" value="Pesan Baru dari Portofolio Laksmana">
          <input type="hidden" name="_next" value="?submit=success#contact">
          <input type="text" name="_gotcha" style="display:none"> <!-- Anti-spam -->
          
          <button type="submit">Kirim Pesan</button>
        </form>
        <div id="formSuccess" class="form-success">
          <h3><i class="fas fa-check-circle"></i> Pesan Terkirim!</h3>
          <p>Terima kasih telah menghubungi saya. Saya akan segera membalas pesan Anda.</p>
        </div>
      </div>
    </section>

    <!-- Modal untuk Dashboard -->
    <div id="dashboard-modal" class="modal">
      <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h2 class="section-title">Dashboard Pengetahuan Saya</h2>
        
        <div class="dashboard-tabs">
          <button class="dashboard-tab active" data-tab="notes">Catatan</button>
          <button class="dashboard-tab" data-tab="files">File</button>
          <button class="dashboard-tab" data-tab="bookmarks">Bookmark</button>
          <button class="dashboard-tab" data-tab="projects">Proyek</button>
        </div>
        
        <div class="dashboard-content">
          <!-- Tab Catatan -->
          <div id="notes-tab" class="dashboard-tab-content active">
            <div class="notes-controls">
              <button id="add-note" class="btn-primary"><i class="fas fa-plus"></i> Catatan Baru</button>
              <div class="search-box">
                <input type="text" id="search-notes" placeholder="Cari catatan...">
                <i class="fas fa-search"></i>
              </div>
            </div>
            <div class="notes-list" id="notes-list">
              <!-- Catatan akan dimuat di sini -->
            </div>
          </div>
          
          <!-- Tab File -->
          <div id="files-tab" class="dashboard-tab-content">
            <div class="files-controls">
              <button id="upload-file" class="btn-primary"><i class="fas fa-upload"></i> Unggah File</button>
              <input type="file" id="file-input" multiple style="display: none;">
              <div class="file-filters">
                <button class="filter-btn active" data-filter="all">Semua</button>
                <button class="filter-btn" data-filter="document">Dokumen</button>
                <button class="filter-btn" data-filter="image">Gambar</button>
                <button class="filter-btn" data-filter="video">Video</button>
                <button class="filter-btn" data-filter="audio">Audio</button>
                <button class="filter-btn" data-filter="other">Lainnya</button>
              </div>
            </div>
            <div class="files-grid" id="files-grid">
              <!-- File akan dimuat di sini -->
            </div>
          </div>
          
          <!-- Tab Bookmark -->
          <div id="bookmarks-tab" class="dashboard-tab-content">
            <div class="bookmark-controls">
              <button id="add-bookmark" class="btn-primary"><i class="fas fa-plus"></i> Tambah Bookmark</button>
              <div class="search-box">
                <input type="text" id="search-bookmarks" placeholder="Cari bookmark...">
                <i class="fas fa-search"></i>
              </div>
            </div>
            <div class="bookmarks-list" id="bookmarks-list">
              <!-- Bookmark akan dimuat di sini -->
            </div>
          </div>
          
          <!-- Tab Proyek -->
          <div id="projects-tab" class="dashboard-tab-content">
            <div class="projects-controls">
              <button id="add-project" class="btn-primary"><i class="fas fa-plus"></i> Proyek Baru</button>
              <div class="project-filters">
                <button class="filter-btn active" data-filter="all">Semua</button>
                <button class="filter-btn" data-filter="web">Web</button>
                <button class="filter-btn" data-filter="mobile">Mobile</button>
                <button class="filter-btn" data-filter="design">Desain</button>
                <button class="filter-btn" data-filter="other">Lainnya</button>
              </div>
            </div>
            <div class="projects-grid" id="projects-grid">
              <!-- Proyek akan dimuat di sini -->
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal untuk Editor Catatan -->
    <div id="note-editor-modal" class="modal">
      <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h2 class="section-title">Editor Catatan</h2>
        <form id="note-form">
          <input type="hidden" id="note-id">
          <div class="form-group">
            <label for="note-title">Judul</label>
            <input type="text" id="note-title" required>
          </div>
          <div class="form-group">
            <label for="note-category">Kategori</label>
            <select id="note-category">
              <option value="pribadi">Pribadi</option>
              <option value="kerja">Kerja</option>
              <option value="belajar">Belajar</option>
              <option value="ide">Ide</option>
              <option value="lainnya">Lainnya</option>
            </select>
          </div>
          <div class="form-group">
            <label for="note-content">Isi</label>
            <textarea id="note-content" rows="10"></textarea>
          </div>
          <div class="form-actions">
            <button type="submit" class="btn-primary">Simpan</button>
            <button type="button" class="btn-secondary" id="cancel-note">Batal</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Modal untuk Bookmark -->
    <div id="bookmark-modal" class="modal">
      <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h2 class="section-title">Tambah Bookmark</h2>
        <form id="bookmark-form">
          <input type="hidden" id="bookmark-id">
          <div class="form-group">
            <label for="bookmark-title">Judul</label>
            <input type="text" id="bookmark-title" required>
          </div>
          <div class="form-group">
            <label for="bookmark-url">URL</label>
            <input type="url" id="bookmark-url" required>
          </div>
          <div class="form-group">
            <label for="bookmark-category">Kategori</label>
            <select id="bookmark-category">
              <option value="referensi">Referensi</option>
              <option value="tutorial">Tutorial</option>
              <option value="alat">Alat</option>
              <option value="inspirasi">Inspirasi</option>
              <option value="lainnya">Lainnya</option>
            </select>
          </div>
          <div class="form-group">
            <label for="bookmark-notes">Catatan</label>
            <textarea id="bookmark-notes" rows="5"></textarea>
          </div>
          <div class="form-actions">
            <button type="submit" class="btn-primary">Simpan</button>
            <button type="button" class="btn-secondary" id="cancel-bookmark">Batal</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Modal untuk Proyek -->
    <div id="project-modal" class="modal">
      <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h2 class="section-title">Tambah Proyek</h2>
        <form id="project-form">
          <input type="hidden" id="project-id">
          <div class="form-group">
            <label for="project-title">Judul</label>
            <input type="text" id="project-title" required>
          </div>
          <div class="form-group">
            <label for="project-category">Kategori</label>
            <select id="project-category">
              <option value="web">Web</option>
              <option value="mobile">Mobile</option>
              <option value="design">Desain</option>
              <option value="other">Lainnya</option>
            </select>
          </div>
          <div class="form-group">
            <label for="project-description">Deskripsi</label>
            <textarea id="project-description" rows="5" required></textarea>
          </div>
          <div class="form-group">
            <label for="project-status">Status</label>
            <select id="project-status">
              <option value="planning">Perencanaan</option>
              <option value="in-progress">Dalam Pengerjaan</option>
              <option value="completed">Selesai</option>
              <option value="on-hold">Ditunda</option>
            </select>
          </div>
          <div class="form-group">
            <label for="project-files">File Terkait</label>
            <div id="project-files-list"></div>
            <button type="button" id="add-project-file" class="btn-secondary"><i class="fas fa-plus"></i> Tambah File</button>
          </div>
          <div class="form-actions">
            <button type="submit" class="btn-primary">Simpan</button>
            <button type="button" class="btn-secondary" id="cancel-project">Batal</button>
          </div>
        </form>
      </div>
    </div>

    <button onclick="topFunction()" id="toTopBtn" title="Kembali ke atas"><i class="fas fa-arrow-up"></i></button>

    <a href="https://wa.me/082146585275" class="wa-float" target="_blank" aria-label="Chat via WhatsApp">
      <i class="fab fa-whatsapp"></i>
    </a>

    <div id="clock"></div>

    <footer>
      <div class="footer-logo">Laksmana</div>
      <p class="footer-text">Membawa keindahan dan kehangatan Afrika ke dalam dunia digital</p>
      <div class="socials">
        <a href="https://instagram.com/laksawl" target="_blank" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
        <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
        <a href="https://github.com/LaksaGaming" target="_blank" aria-label="GitHub"><i class="fab fa-github"></i></a>
        <a href="https://linkedin.com" target="_blank" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
      </div>
      <p class="copyright">&copy; 2025 Laksmana. All Rights Reserved.</p>
    </footer>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12/lib/typed.min.js"></script>
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/lightgallery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
  <script>
    // Konfigurasi Firebase - GANTI DENGAN KONFIGURASI ANDA SENDIRI
    const firebaseConfig = {
  apiKey: "AIzaSyCPsYJsng2gnDgmT2QZ9fJNUDW_ZYnNInA",
  authDomain: "laksinteraktif.firebaseapp.com",
  databaseURL: "https://laksinteraktif-default-rtdb.asia-southeast1.firebasedatabase.app", // Ditambahkan
  projectId: "laksinteraktif",
  storageBucket: "laksinteraktif.firebasestorage.app", // Diperbaiki
  messagingSenderId: "50047311753",
  appId: "1:50047311753:web:30267a3469dfa5c59acb58"
};

    // Inisialisasi Firebase
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();
    const auth = firebase.auth();
    const storage = firebase.storage();

    // ==================== AUTHENTICATION SYSTEM ====================
    // DOM Elements
    const loginPage = document.getElementById('login-page');
    const mainContent = document.getElementById('main-content');
    const loginForm = document.getElementById('login-form');
    const registerForm = document.getElementById('register-form');
    const logoutBtn = document.getElementById('logout-btn');

    // Fungsi untuk menampilkan pesan error
    function showError(elementId, message) {
      const element = document.getElementById(elementId);
      if (!element.nextElementSibling || !element.nextElementSibling.classList.contains('error-message')) {
        const errorElement = document.createElement('div');
        errorElement.className = 'error-message';
        errorElement.style.color = 'var(--danger)';
        errorElement.style.marginTop = '5px';
        errorElement.style.fontSize = '0.9rem';
        element.parentNode.insertBefore(errorElement, element.nextSibling);
      }
      element.nextElementSibling.textContent = message;
    }

    // Fungsi untuk menghapus pesan error
    function clearError(elementId) {
      const element = document.getElementById(elementId);
      if (element.nextElementSibling && element.nextElementSibling.classList.contains('error-message')) {
        element.nextElementSibling.textContent = '';
      }
    }

    // Check auth state
    auth.onAuthStateChanged(user => {
      if (user) {
        // User is signed in
        loginPage.style.display = 'none';
        mainContent.style.display = 'block';
        logoutBtn.style.display = 'block';
        
        // Load data setelah login berhasil
        loadDataAfterLogin();
      } else {
        // No user is signed in
        loginPage.style.display = 'flex';
        mainContent.style.display = 'none';
        logoutBtn.style.display = 'none';
      }
    });

    // Fungsi untuk memuat data setelah login
    function loadDataAfterLogin() {
      // Di sini Anda bisa memuat data yang diperlukan setelah login
      console.log('User logged in:', auth.currentUser.email);
      
      // Inisialisasi AOS (Animate On Scroll)
      AOS.init({
        duration: 800,
        easing: 'ease-in-out',
        once: true
      });

      // Inisialisasi Typed.js untuk efek mengetik
      const typed = new Typed("#typed", {
        strings: ["Halo, saya Laksmana", "Web Developer", "Desainer Afro Klasik", "Pencipta Pengalaman Digital"],
        typeSpeed: 60,
        backSpeed: 40,
        loop: true,
        showCursor: true,
        cursorChar: '|'
      });

      // Inisialisasi particles.js
      particlesJS('particles-js', {
        particles: {
          number: { value: 80, density: { enable: true, value_area: 800 } },
          color: { value: "#E8B959" },
          shape: { type: "circle" },
          opacity: { value: 0.5, random: true },
          size: { value: 3, random: true },
          line_linked: { enable: true, distance: 150, color: "#E8B959", opacity: 0.4, width: 1 },
          move: { enable: true, speed: 2, direction: "none", random: true, straight: false, out_mode: "out" }
        },
        interactivity: {
          detect_on: "canvas",
          events: {
            onhover: { enable: true, mode: "repulse" },
            onclick: { enable: true, mode: "push" }
          }
        }
      });

      // Inisialisasi lightGallery
      lightGallery(document.querySelector('.gallery'), {
        selector: '.gallery-item',
        download: false,
        counter: false,
        enableDrag: false
      });

      // Animasi skill bar saat muncul di viewport
      const skills = document.querySelectorAll('.skill-bar');
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.style.width = entry.target.getAttribute('data-level');
            observer.unobserve(entry.target);
          }
        });
      }, { threshold: 0.7 });
      
      skills.forEach(skill => {
        observer.observe(skill);
      });

      // Handle Formspree submission success
      const urlParams = new URLSearchParams(window.location.search);
      if(urlParams.get('submit') === 'success') {
        document.getElementById('contactForm').style.display = 'none';
        document.getElementById('formSuccess').style.display = 'block';
        window.history.replaceState({}, document.title, window.location.pathname + '#contact');
      }

      // Jam digital
      function updateClock() {
        const now = new Date();
        const days = ["Minggu", "Senin", "Selasa", "Rabu", "Kamis", "Jumat", "Sabtu"];
        const day = days[now.getDay()];
        const date = now.toLocaleDateString('id-ID', {
          day: 'numeric',
          month: 'long',
          year: 'numeric'
        });
        const time = now.toLocaleTimeString('id-ID', { hour12: false });
        document.getElementById("clock").textContent = `${day}, ${date} | ${time}`;
      }
      setInterval(updateClock, 1000);
      updateClock();

      // Tombol kembali ke atas
      let toTopBtn = document.getElementById("toTopBtn");
      window.onscroll = function() {
        toTopBtn.style.display = document.documentElement.scrollTop > 300 ? "block" : "none";
      };
      
      function topFunction() {
        window.scrollTo({
          top: 0,
          behavior: 'smooth'
        });
      }

      // Dark/Light mode toggle dengan localStorage
      const darkToggle = document.getElementById('darkToggle');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      const storedTheme = localStorage.getItem('theme');
      
      // Set initial theme
      if (storedTheme === 'dark' || (!storedTheme && prefersDark)) {
        document.body.classList.add('dark');
        darkToggle.classList.add('fa-sun');
        darkToggle.classList.remove('fa-moon');
      }
      
      darkToggle.addEventListener('click', () => {
        document.body.classList.toggle('dark');
        const isDark = document.body.classList.contains('dark');
        darkToggle.classList.toggle('fa-sun', isDark);
        darkToggle.classList.toggle('fa-moon', !isDark);
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
        
        // Update chart theme if it exists
        if (window.financeChart) {
          const isDarkMode = document.body.classList.contains('dark');
          const gridColor = isDarkMode ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)';
          const textColor = isDarkMode ? '#fff' : '#666';
          
          window.financeChart.options.scales.x.grid.color = gridColor;
          window.financeChart.options.scales.y.grid.color = gridColor;
          window.financeChart.options.scales.x.ticks.color = textColor;
          window.financeChart.options.scales.y.ticks.color = textColor;
          window.financeChart.options.plugins.legend.labels.color = textColor;
          window.financeChart.update();
        }
      });

      // Preloader
      setTimeout(() => {
        document.getElementById("loader").style.opacity = '0';
        document.getElementById("loader").style.visibility = 'hidden';
      }, 1500);
    }

    // Login function
    loginForm.addEventListener('submit', e => {
      e.preventDefault();
      const email = document.getElementById('login-email').value;
      const password = document.getElementById('login-password').value;
      
      // Validasi input
      if (!email || !password) {
        showError('login-email', !email ? 'Email harus diisi' : '');
        showError('login-password', !password ? 'Password harus diisi' : '');
        return;
      }
      
      // Tampilkan loading
      const loginBtn = loginForm.querySelector('button[type="submit"]');
      const originalBtnText = loginBtn.innerHTML;
      loginBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Memproses...';
      loginBtn.disabled = true;
      
      auth.signInWithEmailAndPassword(email, password)
        .then(userCredential => {
          // Login success
          console.log('User logged in:', userCredential.user);
        })
        .catch(error => {
          // Handle errors
          console.error('Login error:', error);
          let errorMessage = 'Login gagal';
          
          switch (error.code) {
            case 'auth/user-not-found':
              errorMessage = 'Email tidak terdaftar';
              showError('login-email', errorMessage);
              break;
            case 'auth/wrong-password':
              errorMessage = 'Password salah';
              showError('login-password', errorMessage);
              break;
            case 'auth/invalid-email':
              errorMessage = 'Format email tidak valid';
              showError('login-email', errorMessage);
              break;
            default:
              alert(errorMessage + ': ' + error.message);
          }
        })
        .finally(() => {
          // Reset button state
          loginBtn.innerHTML = originalBtnText;
          loginBtn.disabled = false;
        });
    });

    // Register function
    registerForm.addEventListener('submit', e => {
      e.preventDefault();
      const name = document.getElementById('register-name').value;
      const email = document.getElementById('register-email').value;
      const password = document.getElementById('register-password').value;
      const confirm = document.getElementById('register-confirm').value;
      
      // Validasi input
      let isValid = true;
      
      if (!name) {
        showError('register-name', 'Nama harus diisi');
        isValid = false;
      }
      
      if (!email) {
        showError('register-email', 'Email harus diisi');
        isValid = false;
      }
      
      if (!password) {
        showError('register-password', 'Password harus diisi');
        isValid = false;
      }
      
      if (!confirm) {
        showError('register-confirm', 'Konfirmasi password harus diisi');
        isValid = false;
      }
      
      if (password !== confirm) {
        showError('register-confirm', 'Password dan konfirmasi password tidak sama');
        isValid = false;
      }
      
      if (!isValid) return;
      
      // Tampilkan loading
      const registerBtn = registerForm.querySelector('button[type="submit"]');
      const originalBtnText = registerBtn.innerHTML;
      registerBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Mendaftarkan...';
      registerBtn.disabled = true;
      
      auth.createUserWithEmailAndPassword(email, password)
        .then(userCredential => {
          // Update user profile
          return userCredential.user.updateProfile({
            displayName: name
          });
        })
        .then(() => {
          // Registration success
          alert('Pendaftaran berhasil! Silakan login.');
          document.getElementById('switch-form').checked = false;
          registerForm.reset();
        })
        .catch(error => {
          // Handle errors
          console.error('Registration error:', error);
          let errorMessage = 'Pendaftaran gagal';
          
          switch (error.code) {
            case 'auth/email-already-in-use':
              errorMessage = 'Email sudah terdaftar';
              showError('register-email', errorMessage);
              break;
            case 'auth/invalid-email':
              errorMessage = 'Format email tidak valid';
              showError('register-email', errorMessage);
              break;
            case 'auth/weak-password':
              errorMessage = 'Password terlalu lemah (minimal 6 karakter)';
              showError('register-password', errorMessage);
              break;
            default:
              alert(errorMessage + ': ' + error.message);
          }
        })
        .finally(() => {
          // Reset button state
          registerBtn.innerHTML = originalBtnText;
          registerBtn.disabled = false;
        });
    });

    // Clear errors when typing
    document.getElementById('login-email').addEventListener('input', () => clearError('login-email'));
    document.getElementById('login-password').addEventListener('input', () => clearError('login-password'));
    document.getElementById('register-name').addEventListener('input', () => clearError('register-name'));
    document.getElementById('register-email').addEventListener('input', () => clearError('register-email'));
    document.getElementById('register-password').addEventListener('input', () => {
      clearError('register-password');
      clearError('register-confirm');
    });
    document.getElementById('register-confirm').addEventListener('input', () => clearError('register-confirm'));

    // Logout function
    function logout() {
      // Tampilkan konfirmasi
      if (confirm('Apakah Anda yakin ingin keluar?')) {
        auth.signOut()
          .then(() => {
            console.log('User signed out');
          })
          .catch(error => {
            console.error('Logout error:', error);
            alert('Gagal logout: ' + error.message);
          });
      }
    }

    logoutBtn.addEventListener('click', e => {
      e.preventDefault();
      logout();
    });

    // ==================== FINANCE APP FUNCTIONALITY ====================
    document.addEventListener('DOMContentLoaded', function() {
      // Referensi database
      const transactionsRef = database.ref('transactions');
      let transactions = [];
      
      // DOM Elements
      const transactionForm = document.getElementById('transaction-form');
      const transactionList = document.getElementById('transaction-list');
      const totalIncomeElement = document.getElementById('total-income');
      const totalExpenseElement = document.getElementById('total-expense');
      const totalBalanceElement = document.getElementById('total-balance');
      const tabs = document.querySelectorAll('.tab');
      const tabContents = document.querySelectorAll('.tab-content');
      const filterButtons = document.querySelectorAll('.filter-group button');
      const monthFilter = document.getElementById('month-filter');
      
      // Format currency
      function formatCurrency(amount) {
        return new Intl.NumberFormat('id-ID', { 
          style: 'currency', 
          currency: 'IDR', 
          minimumFractionDigits: 0 
        }).format(amount);
      }
      
      // Calculate totals
      function calculateTotals() {
        const income = transactions
          .filter(t => t.type === 'income')
          .reduce((sum, t) => sum + t.amount, 0);
        
        const expense = transactions
          .filter(t => t.type === 'expense')
          .reduce((sum, t) => sum + t.amount, 0);
        
        const balance = income - expense;
        
        totalIncomeElement.textContent = formatCurrency(income);
        totalExpenseElement.textContent = formatCurrency(expense);
        totalBalanceElement.textContent = formatCurrency(balance);
      }
      
      // Render transactions
      function renderTransactions(filter = 'all', month = 'all') {
        transactionList.innerHTML = '';
        
        const filteredTransactions = transactions.filter(t => {
          const matchesFilter = filter === 'all' || t.type === filter;
          const transactionMonth = new Date(t.date).getMonth() + 1;
          const matchesMonth = month === 'all' || transactionMonth.toString() === month;
          return matchesFilter && matchesMonth;
        });
        
        if (filteredTransactions.length === 0) {
          transactionList.innerHTML = '<p style="padding: 1rem; text-align: center;">Tidak ada transaksi yang ditemukan</p>';
          return;
        }
        
        // Sort by date (newest first)
        filteredTransactions.sort((a, b) => new Date(b.date) - new Date(a.date));
        
        filteredTransactions.forEach((transaction) => {
          const transactionElement = document.createElement('div');
          transactionElement.className = 'transaction-item';
          
          const date = new Date(transaction.date);
          const formattedDate = date.toLocaleDateString('id-ID', {
            day: 'numeric',
            month: 'short',
            year: 'numeric'
          });
          
          transactionElement.innerHTML = `
            <div class="transaction-details">
              <span class="transaction-category">${transaction.category}</span>
              <span>${transaction.description || 'Tidak ada deskripsi'}</span>
              <span class="transaction-date">${formattedDate}</span>
            </div>
            <div class="transaction-amount ${transaction.type}">
              ${transaction.type === 'income' ? '+' : '-'}${formatCurrency(transaction.amount)}
              <button class="delete-btn" data-id="${transaction.id}">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          `;
          
          transactionList.appendChild(transactionElement);
        });
        
        // Add event listeners to delete buttons
        document.querySelectorAll('.delete-btn').forEach(btn => {
          btn.addEventListener('click', function() {
            const transactionId = this.getAttribute('data-id');
            if (confirm('Apakah Anda yakin ingin menghapus transaksi ini?')) {
              transactionsRef.child(transactionId).remove()
                .then(() => console.log("Transaksi dihapus"))
                .catch(error => console.error("Gagal menghapus:", error));
            }
          });
        });
      }
      
      // Get current active filter
      function getCurrentFilter() {
        const activeFilter = document.querySelector('.filter-group button.active');
        return activeFilter ? activeFilter.id.replace('filter-', '') : 'all';
      }
      
      // Initialize chart
      function initChart() {
        const months = ['Jan', 'Feb', 'Mar', 'Apr', 'Mei', 'Jun', 'Jul', 'Ags', 'Sep', 'Okt', 'Nov', 'Des'];
        const currentMonth = new Date().getMonth();
        const displayMonths = months.slice(Math.max(0, currentMonth - 5), currentMonth + 1);
        
        const incomeData = new Array(displayMonths.length).fill(0);
        const expenseData = new Array(displayMonths.length).fill(0);
        
        transactions.forEach(t => {
          const month = new Date(t.date).getMonth();
          const monthIndex = displayMonths.indexOf(months[month]);
          
          if (monthIndex !== -1) {
            if (t.type === 'income') {
              incomeData[monthIndex] += t.amount;
            } else {
              expenseData[monthIndex] += t.amount;
            }
          }
        });
        
        const isDark = document.body.classList.contains('dark');
        const gridColor = isDark ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)';
        const textColor = isDark ? '#fff' : '#666';
        
        if (window.financeChart) {
          window.financeChart.destroy();
        }
        
        window.financeChart = new Chart(document.getElementById('finance-chart').getContext('2d'), {
          type: 'bar',
          data: {
            labels: displayMonths,
            datasets: [
              {
                label: 'Pemasukan',
                data: incomeData,
                backgroundColor: '#4CAF50',
                borderRadius: 5
              },
              {
                label: 'Pengeluaran',
                data: expenseData,
                backgroundColor: '#D85A42',
                borderRadius: 5
              }
            ]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              x: {
                grid: {
                  color: gridColor
                },
                ticks: {
                  color: textColor
                }
              },
              y: {
                grid: {
                  color: gridColor
                },
                ticks: {
                  color: textColor,
                  callback: function(value) {
                    return 'Rp' + value.toLocaleString('id-ID');
                  }
                }
              }
            },
            plugins: {
              legend: {
                labels: {
                  color: textColor
                }
              },
              tooltip: {
                callbacks: {
                  label: function(context) {
                    return context.dataset.label + ': Rp' + context.raw.toLocaleString('id-ID');
                  }
                }
              }
            }
          }
        });
      }
      
      // Update chart data
      function updateChart() {
        initChart();
      }
      
      // Tab switching
      tabs.forEach(tab => {
        tab.addEventListener('click', function() {
          const tabId = this.getAttribute('data-tab');
          
          tabs.forEach(t => t.classList.remove('active'));
          tabContents.forEach(c => c.classList.remove('active'));
          
          this.classList.add('active');
          document.getElementById(`${tabId}-tab`).classList.add('active');
          
          if (tabId === 'stats') {
            updateChart();
          }
        });
      });
      
      // Filter buttons
      filterButtons.forEach(btn => {
        btn.addEventListener('click', function() {
          filterButtons.forEach(b => b.classList.remove('active'));
          this.classList.add('active');
          
          const filter = this.id.replace('filter-', '');
          const month = monthFilter.value;
          renderTransactions(filter, month);
        });
      });
      
      // Month filter
      monthFilter.addEventListener('change', function() {
        const activeFilter = document.querySelector('.filter-group button.active');
        const filter = activeFilter ? activeFilter.id.replace('filter-', '') : 'all';
        renderTransactions(filter, this.value);
      });
      
      // Form submission
      transactionForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const formData = new FormData(this);
        const newTransaction = {
          type: formData.get('type'),
          amount: parseFloat(formData.get('amount')),
          category: formData.get('category'),
          date: formData.get('date'),
          description: formData.get('description'),
          createdAt: firebase.database.ServerValue.TIMESTAMP,
          userId: auth.currentUser.uid
        };
        
        // Push ke Firebase
        const newTransactionRef = transactionsRef.push();
        newTransactionRef.set(newTransaction)
          .then(() => {
            console.log("Transaksi disimpan");
            this.reset();
            document.getElementById('transaction-date').valueAsDate = new Date();
          })
          .catch(error => {
            console.error("Gagal menyimpan:", error);
            alert("Gagal menyimpan transaksi: " + error.message);
          });
      });
      
      // Set default date to today
      document.getElementById('transaction-date').valueAsDate = new Date();
      
      // Load data dari Firebase
      function loadFinanceData() {
        if (!auth.currentUser) return;
        
        transactionsRef.orderByChild('userId').equalTo(auth.currentUser.uid).on('value', (snapshot) => {
          transactions = [];
          snapshot.forEach((childSnapshot) => {
            const transaction = childSnapshot.val();
            transaction.id = childSnapshot.key;
            transactions.push(transaction);
          });
          
          renderTransactions();
          calculateTotals();
        });
      }
      
      // Load data saat user login
      auth.onAuthStateChanged(user => {
        if (user) {
          loadFinanceData();
        }
      });
      
      // Error handling
      transactionsRef.on('error', (error) => {
        console.error("Firebase error:", error);
        alert("Gagal memuat data: " + error.message);
      });
    });

    // ==================== DASHBOARD KNOWLEDGE MANAGEMENT SYSTEM ====================
    document.addEventListener('DOMContentLoaded', function() {
      // Referensi database untuk dashboard
      const notesRef = database.ref('dashboard/notes');
      const filesRef = database.ref('dashboard/files');
      const bookmarksRef = database.ref('dashboard/bookmarks');
      const projectsRef = database.ref('dashboard/projects');
      const storageRef = storage.ref();
      
      // DOM Elements
      const dashboardModal = document.getElementById('dashboard-modal');
      const noteEditorModal = document.getElementById('note-editor-modal');
      const bookmarkModal = document.getElementById('bookmark-modal');
      const projectModal = document.getElementById('project-modal');
      const openDashboardBtn = document.createElement('a');
      const closeModalBtns = document.querySelectorAll('.close-modal');
      const dashboardTabs = document.querySelectorAll('.dashboard-tab');
      const dashboardTabContents = document.querySelectorAll('.dashboard-tab-content');
      
      // Tambahkan tombol dashboard ke header
      openDashboardBtn.href = '#';
      openDashboardBtn.innerHTML = '<a href="#" id="open-dashboard-btn"><i class="fas fa-brain"></i></a>';
      openDashboardBtn.style.marginLeft = '1rem';
      openDashboardBtn.style.fontSize = '1.5rem';
      openDashboardBtn.style.color = 'inherit';
      openDashboardBtn.style.transition = 'all 0.3s';
      openDashboardBtn.addEventListener('mouseover', () => {
        openDashboardBtn.style.color = 'var(--primary)';
        openDashboardBtn.style.transform = 'rotate(20deg)';
      });
      openDashboardBtn.addEventListener('mouseout', () => {
        openDashboardBtn.style.color = 'inherit';
        openDashboardBtn.style.transform = 'rotate(0)';
      });
      openDashboardBtn.addEventListener('click', (e) => {
        e.preventDefault();
        openDashboard();
      });
      
      // Tambahkan tombol ke header setelah dark toggle
      const darkToggle = document.getElementById('darkToggle');
      darkToggle.parentNode.insertBefore(openDashboardBtn, darkToggle.nextSibling);
      
      // Fungsi untuk membuka dashboard
      function openDashboard() {
        dashboardModal.style.display = 'block';
        document.body.style.overflow = 'hidden';
        loadDashboardData();
      }
      
      // Fungsi untuk menutup modal
      function closeModal(modal) {
        modal.style.display = 'none';
        document.body.style.overflow = 'auto';
      }
      
      // Event listeners untuk menutup modal
      closeModalBtns.forEach(btn => {
        btn.addEventListener('click', function() {
          const modal = this.closest('.modal');
          closeModal(modal);
        });
      });
      
      // Tutup modal saat klik di luar konten modal
      window.addEventListener('click', function(e) {
        if (e.target.classList.contains('modal')) {
          closeModal(e.target);
        }
      });
      
      // Tab switching untuk dashboard
      dashboardTabs.forEach(tab => {
        tab.addEventListener('click', function() {
          const tabId = this.getAttribute('data-tab');
          
          dashboardTabs.forEach(t => t.classList.remove('active'));
          dashboardTabContents.forEach(c => c.classList.remove('active'));
          
          this.classList.add('active');
          document.getElementById(`${tabId}-tab`).classList.add('active');
          
          // Muat ulang data jika diperlukan
          if (tabId === 'files') {
            loadFiles();
          } else if (tabId === 'projects') {
            loadProjects();
          }
        });
      });
      
      // ==================== NOTES MANAGEMENT ====================
      const addNoteBtn = document.getElementById('add-note');
      const notesList = document.getElementById('notes-list');
      const noteForm = document.getElementById('note-form');
      const cancelNoteBtn = document.getElementById('cancel-note');
      
      // Buka editor catatan baru
      addNoteBtn.addEventListener('click', function() {
        noteForm.reset();
        document.getElementById('note-id').value = '';
        noteEditorModal.style.display = 'block';
      });
      
      // Batal editor catatan
      cancelNoteBtn.addEventListener('click', function() {
        closeModal(noteEditorModal);
      });
      
      // Simpan catatan
      noteForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const noteId = document.getElementById('note-id').value;
        const noteData = {
          title: document.getElementById('note-title').value,
          category: document.getElementById('note-category').value,
          content: document.getElementById('note-content').value,
          updatedAt: firebase.database.ServerValue.TIMESTAMP,
          userId: auth.currentUser.uid
        };
        
        // Jika ada ID, update catatan yang ada
        if (noteId) {
          notesRef.child(noteId).update(noteData)
            .then(() => {
              console.log("Catatan diperbarui");
              closeModal(noteEditorModal);
            })
            .catch(error => {
              console.error("Gagal memperbarui catatan:", error);
              alert("Gagal memperbarui catatan: " + error.message);
            });
        } else {
          // Jika tidak ada ID, buat catatan baru
          noteData.createdAt = firebase.database.ServerValue.TIMESTAMP;
          notesRef.push(noteData)
            .then(() => {
              console.log("Catatan disimpan");
              closeModal(noteEditorModal);
            })
            .catch(error => {
              console.error("Gagal menyimpan catatan:", error);
              alert("Gagal menyimpan catatan: " + error.message);
            });
        }
      });
      
      // Muat catatan
      function loadNotes() {
        if (!auth.currentUser) return;
        
        notesList.innerHTML = '<div class="loading">Memuat catatan...</div>';
        
        notesRef.orderByChild('userId').equalTo(auth.currentUser.uid).on('value', (snapshot) => {
          notesList.innerHTML = '';
          
          if (!snapshot.exists()) {
            notesList.innerHTML = '<p class="no-data">Belum ada catatan. Klik "Catatan Baru" untuk membuat catatan pertama Anda.</p>';
            return;
          }
          
          snapshot.forEach((childSnapshot) => {
            const note = childSnapshot.val();
            note.id = childSnapshot.key;
            renderNote(note);
          });
        });
      }
      
      // Render catatan
      function renderNote(note) {
        const noteElement = document.createElement('div');
        noteElement.className = 'note-card';
        noteElement.setAttribute('data-id', note.id);
        
        const date = new Date(note.updatedAt || note.createdAt);
        const formattedDate = date.toLocaleDateString('id-ID', {
          day: 'numeric',
          month: 'short',
          year: 'numeric'
        });
        
        noteElement.innerHTML = `
          <div class="note-actions">
            <button class="edit-note" data-id="${note.id}"><i class="fas fa-edit"></i></button>
            <button class="delete-note" data-id="${note.id}"><i class="fas fa-trash"></i></button>
          </div>
          <h3>${note.title}</h3>
          <div class="note-content-preview">${note.content.substring(0, 200)}${note.content.length > 200 ? '...' : ''}</div>
          <div class="note-meta">
            <span class="note-category">${note.category}</span>
            <span>${formattedDate}</span>
          </div>
        `;
        
        notesList.appendChild(noteElement);
        
        // Event listeners untuk aksi catatan
        noteElement.querySelector('.edit-note').addEventListener('click', function(e) {
          e.stopPropagation();
          editNote(note.id);
        });
        
        noteElement.querySelector('.delete-note').addEventListener('click', function(e) {
          e.stopPropagation();
          deleteNote(note.id);
        });
        
        noteElement.addEventListener('click', function() {
          viewNote(note.id);
        });
      }
      
      // Edit catatan
      function editNote(noteId) {
        notesRef.child(noteId).once('value', (snapshot) => {
          const note = snapshot.val();
          
          document.getElementById('note-id').value = noteId;
          document.getElementById('note-title').value = note.title;
          document.getElementById('note-category').value = note.category;
          document.getElementById('note-content').value = note.content;
          
          noteEditorModal.style.display = 'block';
        });
      }
      
      // Lihat catatan
      function viewNote(noteId) {
        notesRef.child(noteId).once('value', (snapshot) => {
          const note = snapshot.val();
          
          document.getElementById('note-id').value = noteId;
          document.getElementById('note-title').value = note.title;
          document.getElementById('note-category').value = note.category;
          document.getElementById('note-content').value = note.content;
          
          // Nonaktifkan input untuk view mode
          document.getElementById('note-title').readOnly = true;
          document.getElementById('note-category').disabled = true;
          document.getElementById('note-content').readOnly = true;
          document.querySelector('#note-form button[type="submit"]').style.display = 'none';
          document.getElementById('cancel-note').textContent = 'Tutup';
          
          noteEditorModal.style.display = 'block';
          
          // Reset setelah modal ditutup
          noteEditorModal.addEventListener('hidden.bs.modal', function() {
            document.getElementById('note-title').readOnly = false;
            document.getElementById('note-category').disabled = false;
            document.getElementById('note-content').readOnly = false;
            document.querySelector('#note-form button[type="submit"]').style.display = 'block';
            document.getElementById('cancel-note').textContent = 'Batal';
          }, { once: true });
        });
      }
      
      // Hapus catatan
      function deleteNote(noteId) {
        if (confirm('Apakah Anda yakin ingin menghapus catatan ini?')) {
          notesRef.child(noteId).remove()
            .then(() => console.log("Catatan dihapus"))
            .catch(error => console.error("Gagal menghapus catatan:", error));
        }
      }
      
      // Pencarian catatan
      document.getElementById('search-notes').addEventListener('input', function() {
        const searchTerm = this.value.toLowerCase();
        const noteCards = document.querySelectorAll('.note-card');
        
        noteCards.forEach(card => {
          const title = card.querySelector('h3').textContent.toLowerCase();
          const content = card.querySelector('.note-content-preview').textContent.toLowerCase();
          
          if (title.includes(searchTerm) || content.includes(searchTerm)) {
            card.style.display = 'block';
          } else {
            card.style.display = 'none';
          }
        });
      });
      
      // ==================== FILE MANAGEMENT ====================
      const uploadFileBtn = document.getElementById('upload-file');
      const fileInput = document.getElementById('file-input');
      const filesGrid = document.getElementById('files-grid');
      
      // Buka dialog unggah file
      uploadFileBtn.addEventListener('click', function() {
        fileInput.click();
      });
      
      // Tangani unggah file
      fileInput.addEventListener('change', function(e) {
        const files = e.target.files;
        
        if (files.length === 0) return;
        
        Array.from(files).forEach(file => {
          uploadFile(file);
        });
        
        // Reset input file
        fileInput.value = '';
      });
      
      // Unggah file ke Firebase Storage
      function uploadFile(file) {
        const fileRef = storageRef.child(`user_files/${auth.currentUser.uid}/${Date.now()}_${file.name}`);
        const uploadTask = fileRef.put(file);
        
        // Buat elemen progress
        const progressElement = document.createElement('div');
        progressElement.className = 'file-upload-progress';
        progressElement.innerHTML = `
          <div class="file-upload-info">
            <span>${file.name}</span>
            <span class="upload-percent">0%</span>
          </div>
          <div class="progress-bar">
            <div class="progress" style="width: 0%"></div>
          </div>
        `;
        filesGrid.prepend(progressElement);
        
        uploadTask.on('state_changed',
          (snapshot) => {
            // Update progress
            const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
            progressElement.querySelector('.progress').style.width = `${progress}%`;
            progressElement.querySelector('.upload-percent').textContent = `${Math.round(progress)}%`;
          },
          (error) => {
            // Handle error
            console.error("Gagal mengunggah file:", error);
            progressElement.innerHTML = `<div class="upload-error">Gagal mengunggah ${file.name}: ${error.message}</div>`;
          },
          () => {
            // Upload complete
            uploadTask.snapshot.ref.getDownloadURL().then((downloadURL) => {
              // Simpan metadata file ke database
              const fileData = {
                name: file.name,
                url: downloadURL,
                type: getFileType(file.type),
                size: file.size,
                uploadedAt: firebase.database.ServerValue.TIMESTAMP,
                userId: auth.currentUser.uid
              };
              
              filesRef.push(fileData)
                .then(() => {
                  console.log("Metadata file disimpan");
                  progressElement.remove();
                })
                .catch(error => {
                  console.error("Gagal menyimpan metadata file:", error);
                  progressElement.innerHTML = `<div class="upload-error">Gagal menyimpan metadata ${file.name}</div>`;
                });
            });
          }
        );
      }
      
      // Dapatkan tipe file untuk kategori
      function getFileType(mimeType) {
        if (mimeType.startsWith('image/')) return 'image';
        if (mimeType.startsWith('video/')) return 'video';
        if (mimeType.startsWith('audio/')) return 'audio';
        if (mimeType.includes('pdf') || mimeType.includes('document') || mimeType.includes('msword') || mimeType.includes('presentation') || mimeType.includes('spreadsheet')) {
          return 'document';
        }
        return 'other';
      }
      
      // Muat file
      function loadFiles(filter = 'all') {
        if (!auth.currentUser) return;
        
        filesGrid.innerHTML = '<div class="loading">Memuat file...</div>';
        
        filesRef.orderByChild('userId').equalTo(auth.currentUser.uid).on('value', (snapshot) => {
          filesGrid.innerHTML = '';
          
          if (!snapshot.exists()) {
            filesGrid.innerHTML = '<p class="no-data">Belum ada file. Klik "Unggah File" untuk menambahkan file pertama Anda.</p>';
            return;
          }
          
          snapshot.forEach((childSnapshot) => {
            const file = childSnapshot.val();
            file.id = childSnapshot.key;
            
            if (filter === 'all' || file.type === filter) {
              renderFile(file);
            }
          });
        });
      }
      
      // Render file
      function renderFile(file) {
        const fileElement = document.createElement('div');
        fileElement.className = 'file-card';
        fileElement.setAttribute('data-id', file.id);
        fileElement.setAttribute('data-type', file.type);
        
        const fileIcon = getFileIcon(file.type);
        const fileSize = formatFileSize(file.size);
        const date = new Date(file.uploadedAt);
        const formattedDate = date.toLocaleDateString('id-ID', {
          day: 'numeric',
          month: 'short',
          year: 'numeric'
        });
        
        fileElement.innerHTML = `
          <div class="file-actions">
            <button class="download-file" data-id="${file.id}" data-url="${file.url}"><i class="fas fa-download"></i></button>
            <button class="delete-file" data-id="${file.id}"><i class="fas fa-trash"></i></button>
          </div>
          <div class="file-icon">${fileIcon}</div>
          <h3>${file.name}</h3>
          <div class="file-meta">
            <span>${fileSize}</span>
            <span>${formattedDate}</span>
          </div>
        `;
        
        filesGrid.appendChild(fileElement);
        
        // Event listeners untuk aksi file
        fileElement.querySelector('.download-file').addEventListener('click', function(e) {
          e.stopPropagation();
          downloadFile(file.url, file.name);
        });
        
        fileElement.querySelector('.delete-file').addEventListener('click', function(e) {
          e.stopPropagation();
          deleteFile(file.id, file.url);
        });
        
        fileElement.addEventListener('click', function() {
          previewFile(file);
        });
      }
      
      // Dapatkan ikon berdasarkan tipe file
      function getFileIcon(fileType) {
        switch(fileType) {
          case 'image':
            return '<i class="fas fa-file-image"></i>';
          case 'video':
            return '<i class="fas fa-file-video"></i>';
          case 'audio':
            return '<i class="fas fa-file-audio"></i>';
          case 'document':
            return '<i class="fas fa-file-pdf"></i>';
          default:
            return '<i class="fas fa-file"></i>';
        }
      }
      
      // Format ukuran file
      function formatFileSize(bytes) {
        if (bytes === 0) return '0 Bytes';
        const k = 1024;
        const sizes = ['Bytes', 'KB', 'MB', 'GB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];
      }
      
      // Unduh file
      function downloadFile(url, fileName) {
        const link = document.createElement('a');
        link.href = url;
        link.download = fileName;
        link.target = '_blank';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
      }
      
      // Pratinjau file
      function previewFile(file) {
        if (file.type === 'image') {
          window.open(file.url, '_blank');
        } else if (file.type === 'pdf') {
          window.open(`https://docs.google.com/viewer?url=${encodeURIComponent(file.url)}`, '_blank');
        } else {
          window.open(file.url, '_blank');
        }
      }
      
      // Hapus file
      function deleteFile(fileId, fileUrl) {
        if (confirm('Apakah Anda yakin ingin menghapus file ini?')) {
          // Hapus dari storage
          const fileRef = storage.refFromURL(fileUrl);
          fileRef.delete()
            .then(() => {
              // Hapus dari database
              filesRef.child(fileId).remove()
                .then(() => console.log("File dihapus"))
                .catch(error => console.error("Gagal menghapus metadata file:", error));
            })
            .catch(error => {
              console.error("Gagal menghapus file dari storage:", error);
              alert("Gagal menghapus file: " + error.message);
            });
        }
      }
      
      // Filter file
      document.querySelectorAll('.file-filters .filter-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          document.querySelectorAll('.file-filters .filter-btn').forEach(b => b.classList.remove('active'));
          this.classList.add('active');
          
          const filter = this.getAttribute('data-filter');
          loadFiles(filter);
        });
      });
      
      // ==================== BOOKMARK MANAGEMENT ====================
      const addBookmarkBtn = document.getElementById('add-bookmark');
      const bookmarksList = document.getElementById('bookmarks-list');
      const bookmarkForm = document.getElementById('bookmark-form');
      const cancelBookmarkBtn = document.getElementById('cancel-bookmark');
      
      // Buka form bookmark baru
      addBookmarkBtn.addEventListener('click', function() {
        bookmarkForm.reset();
        document.getElementById('bookmark-id').value = '';
        bookmarkModal.style.display = 'block';
      });
      
      // Batal form bookmark
      cancelBookmarkBtn.addEventListener('click', function() {
        closeModal(bookmarkModal);
      });
      
      // Simpan bookmark
      bookmarkForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const bookmarkId = document.getElementById('bookmark-id').value;
        const bookmarkData = {
          title: document.getElementById('bookmark-title').value,
          url: document.getElementById('bookmark-url').value,
          category: document.getElementById('bookmark-category').value,
          notes: document.getElementById('bookmark-notes').value,
          updatedAt: firebase.database.ServerValue.TIMESTAMP,
          userId: auth.currentUser.uid
        };
        
        // Jika ada ID, update bookmark yang ada
        if (bookmarkId) {
          bookmarksRef.child(bookmarkId).update(bookmarkData)
            .then(() => {
              console.log("Bookmark diperbarui");
              closeModal(bookmarkModal);
            })
            .catch(error => {
              console.error("Gagal memperbarui bookmark:", error);
              alert("Gagal memperbarui bookmark: " + error.message);
            });
        } else {
          // Jika tidak ada ID, buat bookmark baru
          bookmarkData.createdAt = firebase.database.ServerValue.TIMESTAMP;
          bookmarksRef.push(bookmarkData)
            .then(() => {
              console.log("Bookmark disimpan");
              closeModal(bookmarkModal);
            })
            .catch(error => {
              console.error("Gagal menyimpan bookmark:", error);
              alert("Gagal menyimpan bookmark: " + error.message);
            });
        }
      });
      
      // Muat bookmark
      function loadBookmarks() {
        if (!auth.currentUser) return;
        
        bookmarksList.innerHTML = '<div class="loading">Memuat bookmark...</div>';
        
        bookmarksRef.orderByChild('userId').equalTo(auth.currentUser.uid).on('value', (snapshot) => {
          bookmarksList.innerHTML = '';
          
          if (!snapshot.exists()) {
            bookmarksList.innerHTML = '<p class="no-data">Belum ada bookmark. Klik "Tambah Bookmark" untuk menambahkan bookmark pertama Anda.</p>';
            return;
          }
          
          snapshot.forEach((childSnapshot) => {
            const bookmark = childSnapshot.val();
            bookmark.id = childSnapshot.key;
            renderBookmark(bookmark);
          });
        });
      }
      
      // Render bookmark
      function renderBookmark(bookmark) {
        const bookmarkElement = document.createElement('div');
        bookmarkElement.className = 'bookmark-card';
        bookmarkElement.setAttribute('data-id', bookmark.id);
        
        const date = new Date(bookmark.updatedAt || bookmark.createdAt);
        const formattedDate = date.toLocaleDateString('id-ID', {
          day: 'numeric',
          month: 'short',
          year: 'numeric'
        });
        
        bookmarkElement.innerHTML = `
          <div class="bookmark-actions">
            <button class="edit-bookmark" data-id="${bookmark.id}"><i class="fas fa-edit"></i></button>
            <button class="delete-bookmark" data-id="${bookmark.id}"><i class="fas fa-trash"></i></button>
          </div>
          <h3>${bookmark.title}</h3>
          <div class="bookmark-url">${bookmark.url}</div>
          <div class="bookmark-notes">${bookmark.notes || 'Tidak ada catatan'}</div>
          <div class="bookmark-meta">
            <span class="bookmark-category">${bookmark.category}</span>
            <span>${formattedDate}</span>
          </div>
        `;
        
        bookmarksList.appendChild(bookmarkElement);
        
        // Event listeners untuk aksi bookmark
        bookmarkElement.querySelector('.edit-bookmark').addEventListener('click', function(e) {
          e.stopPropagation();
          editBookmark(bookmark.id);
        });
        
        bookmarkElement.querySelector('.delete-bookmark').addEventListener('click', function(e) {
          e.stopPropagation();
          deleteBookmark(bookmark.id);
        });
        
        bookmarkElement.addEventListener('click', function() {
          window.open(bookmark.url, '_blank');
        });
      }
      
      // Edit bookmark
      function editBookmark(bookmarkId) {
        bookmarksRef.child(bookmarkId).once('value', (snapshot) => {
          const bookmark = snapshot.val();
          
          document.getElementById('bookmark-id').value = bookmarkId;
          document.getElementById('bookmark-title').value = bookmark.title;
          document.getElementById('bookmark-url').value = bookmark.url;
          document.getElementById('bookmark-category').value = bookmark.category;
          document.getElementById('bookmark-notes').value = bookmark.notes || '';
          
          bookmarkModal.style.display = 'block';
        });
      }
      
      // Hapus bookmark
      function deleteBookmark(bookmarkId) {
        if (confirm('Apakah Anda yakin ingin menghapus bookmark ini?')) {
          bookmarksRef.child(bookmarkId).remove()
            .then(() => console.log("Bookmark dihapus"))
            .catch(error => console.error("Gagal menghapus bookmark:", error));
        }
      }
      
      // Pencarian bookmark
      document.getElementById('search-bookmarks').addEventListener('input', function() {
        const searchTerm = this.value.toLowerCase();
        const bookmarkCards = document.querySelectorAll('.bookmark-card');
        
        bookmarkCards.forEach(card => {
          const title = card.querySelector('h3').textContent.toLowerCase();
          const url = card.querySelector('.bookmark-url').textContent.toLowerCase();
          const notes = card.querySelector('.bookmark-notes').textContent.toLowerCase();
          
          if (title.includes(searchTerm) || url.includes(searchTerm) || notes.includes(searchTerm)) {
            card.style.display = 'block';
          } else {
            card.style.display = 'none';
          }
        });
      });
      
      // ==================== PROJECT MANAGEMENT ====================
      const addProjectBtn = document.getElementById('add-project');
      const projectsGrid = document.getElementById('projects-grid');
      const projectForm = document.getElementById('project-form');
      const cancelProjectBtn = document.getElementById('cancel-project');
      const addProjectFileBtn = document.getElementById('add-project-file');
      const projectFilesList = document.getElementById('project-files-list');
      
      // Buka form proyek baru
      addProjectBtn.addEventListener('click', function() {
        projectForm.reset();
        document.getElementById('project-id').value = '';
        projectFilesList.innerHTML = '';
        projectModal.style.display = 'block';
      });
      
      // Batal form proyek
      cancelProjectBtn.addEventListener('click', function() {
        closeModal(projectModal);
      });
      
      // Tambah file ke proyek
      addProjectFileBtn.addEventListener('click', function() {
        const fileInput = document.createElement('input');
        fileInput.type = 'file';
        fileInput.style.display = 'none';
        document.body.appendChild(fileInput);
        
        fileInput.click();
        
        fileInput.addEventListener('change', function() {
          const file = this.files[0];
          if (!file) return;
          
          const fileItem = document.createElement('div');
          fileItem.className = 'project-file-item';
          fileItem.innerHTML = `
            <span>${file.name}</span>
            <button type="button" class="remove-file"><i class="fas fa-times"></i></button>
          `;
          
          fileItem.querySelector('.remove-file').addEventListener('click', function() {
            fileItem.remove();
          });
          
          projectFilesList.appendChild(fileItem);
          document.body.removeChild(fileInput);
        });
      });
      
      // Simpan proyek
      projectForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const projectId = document.getElementById('project-id').value;
        const projectData = {
          title: document.getElementById('project-title').value,
          category: document.getElementById('project-category').value,
          description: document.getElementById('project-description').value,
          status: document.getElementById('project-status').value,
          updatedAt: firebase.database.ServerValue.TIMESTAMP,
          userId: auth.currentUser.uid
        };
        
        // Jika ada ID, update proyek yang ada
        if (projectId) {
          projectsRef.child(projectId).update(projectData)
            .then(() => {
              console.log("Proyek diperbarui");
              closeModal(projectModal);
            })
            .catch(error => {
              console.error("Gagal memperbarui proyek:", error);
              alert("Gagal memperbarui proyek: " + error.message);
            });
        } else {
          // Jika tidak ada ID, buat proyek baru
          projectData.createdAt = firebase.database.ServerValue.TIMESTAMP;
          projectsRef.push(projectData)
            .then(() => {
              console.log("Proyek disimpan");
              closeModal(projectModal);
            })
            .catch(error => {
              console.error("Gagal menyimpan proyek:", error);
              alert("Gagal menyimpan proyek: " + error.message);
            });
        }
      });
      
      // Muat proyek
      function loadProjects(filter = 'all') {
        if (!auth.currentUser) return;
        
        projectsGrid.innerHTML = '<div class="loading">Memuat proyek...</div>';
        
        projectsRef.orderByChild('userId').equalTo(auth.currentUser.uid).on('value', (snapshot) => {
          projectsGrid.innerHTML = '';
          
          if (!snapshot.exists()) {
            projectsGrid.innerHTML = '<p class="no-data">Belum ada proyek. Klik "Proyek Baru" untuk menambahkan proyek pertama Anda.</p>';
            return;
          }
          
          snapshot.forEach((childSnapshot) => {
            const project = childSnapshot.val();
            project.id = childSnapshot.key;
            
            if (filter === 'all' || project.category === filter) {
              renderProject(project);
            }
          });
        });
      }
      
      // Render proyek
      function renderProject(project) {
        const projectElement = document.createElement('div');
        projectElement.className = 'project-card';
        projectElement.setAttribute('data-id', project.id);
        projectElement.setAttribute('data-category', project.category);
        
        const date = new Date(project.updatedAt || project.createdAt);
        const formattedDate = date.toLocaleDateString('id-ID', {
          day: 'numeric',
          month: 'short',
          year: 'numeric'
        });
        
        projectElement.innerHTML = `
          <div class="project-actions">
            <button class="edit-project" data-id="${project.id}"><i class="fas fa-edit"></i></button>
            <button class="delete-project" data-id="${project.id}"><i class="fas fa-trash"></i></button>
          </div>
          <h3>${project.title}</h3>
          <div class="project-description">${project.description}</div>
          <div class="project-meta">
            <span class="project-category">${project.category}</span>
            <span class="project-status ${project.status.replace('-', '')}">${project.status.replace('-', ' ')}</span>
            <span>${formattedDate}</span>
          </div>
        `;
        
        projectsGrid.appendChild(projectElement);
        
        // Event listeners untuk aksi proyek
        projectElement.querySelector('.edit-project').addEventListener('click', function(e) {
          e.stopPropagation();
          editProject(project.id);
        });
        
        projectElement.querySelector('.delete-project').addEventListener('click', function(e) {
          e.stopPropagation();
          deleteProject(project.id);
        });
        
        projectElement.addEventListener('click', function() {
          viewProject(project.id);
        });
      }
      
      // Edit proyek
      function editProject(projectId) {
        projectsRef.child(projectId).once('value', (snapshot) => {
          const project = snapshot.val();
          
          document.getElementById('project-id').value = projectId;
          document.getElementById('project-title').value = project.title;
          document.getElementById('project-category').value = project.category;
          document.getElementById('project-description').value = project.description;
          document.getElementById('project-status').value = project.status;
          
          // Kosongkan dan muat ulang daftar file
          projectFilesList.innerHTML = '';
          
          projectModal.style.display = 'block';
        });
      }
      
      // Lihat proyek
      function viewProject(projectId) {
        projectsRef.child(projectId).once('value', (snapshot) => {
          const project = snapshot.val();
          
          document.getElementById('project-id').value = projectId;
          document.getElementById('project-title').value = project.title;
          document.getElementById('project-category').value = project.category;
          document.getElementById('project-description').value = project.description;
          document.getElementById('project-status').value = project.status;
          
          // Nonaktifkan input untuk view mode
          document.getElementById('project-title').readOnly = true;
          document.getElementById('project-category').disabled = true;
          document.getElementById('project-description').readOnly = true;
          document.getElementById('project-status').disabled = true;
          document.querySelector('#project-form button[type="submit"]').style.display = 'none';
          document.getElementById('cancel-project').textContent = 'Tutup';
          addProjectFileBtn.style.display = 'none';
          
          // Kosongkan dan muat ulang daftar file
          projectFilesList.innerHTML = '';
          
          projectModal.style.display = 'block';
          
          // Reset setelah modal ditutup
          projectModal.addEventListener('hidden.bs.modal', function() {
            document.getElementById('project-title').readOnly = false;
            document.getElementById('project-category').disabled = false;
            document.getElementById('project-description').readOnly = false;
            document.getElementById('project-status').disabled = false;
            document.querySelector('#project-form button[type="submit"]').style.display = 'block';
            document.getElementById('cancel-project').textContent = 'Batal';
            addProjectFileBtn.style.display = 'block';
          }, { once: true });
        });
      }
      
      // Hapus proyek
      function deleteProject(projectId) {
        if (confirm('Apakah Anda yakin ingin menghapus proyek ini?')) {
          projectsRef.child(projectId).remove()
            .then(() => console.log("Proyek dihapus"))
            .catch(error => console.error("Gagal menghapus proyek:", error));
        }
      }
      
      // Filter proyek
      document.querySelectorAll('.project-filters .filter-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          document.querySelectorAll('.project-filters .filter-btn').forEach(b => b.classList.remove('active'));
          this.classList.add('active');
          
          const filter = this.getAttribute('data-filter');
          loadProjects(filter);
        });
      });
      
      // ==================== LOAD ALL DASHBOARD DATA ====================
      function loadDashboardData() {
        loadNotes();
        loadFiles();
        loadBookmarks();
        loadProjects();
      }
      
      // Initialize dashboard when user is logged in
      auth.onAuthStateChanged(user => {
        if (user) {
          // Inisialisasi dashboard jika diperlukan
        }
      });
    });
  </script>
</body>
</html>



